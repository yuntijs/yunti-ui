"use strict";(self.webpackChunk_yuntijs_ui=self.webpackChunk_yuntijs_ui||[]).push([[252],{41453:function(s,t,n){n.r(t),n.d(t,{StoryBook:function(){return e.ZP},useControls:function(){return r.useControls},useCreateStore:function(){return r.useCreateStore}});var e=n(16896),r=n(95165)},63527:function(s,t,n){var e;n.r(t),n.d(t,{demos:function(){return P}});var r=n(90228),a=n.n(r),d=n(87999),i=n.n(d),l=n(52136),m=n(77371),y=n(44282),I=n(37408),h=n(2665),x=n(55383),g=n(41453),C=n(99630),P={"src-form-demo-demos":{component:l.memo(l.lazy(function(){return Promise.all([n.e(5217),n.e(1179),n.e(2622),n.e(4240),n.e(3112),n.e(9172),n.e(3748),n.e(6896),n.e(9534),n.e(3311),n.e(2433)]).then(n.bind(n,45502))})),asset:{type:"BLOCK",id:"src-form-demo-demos",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(52644).Z},"@yuntijs/ui":{type:"NPM",value:"2.0.0-beta.23"},"lucide-react":{type:"NPM",value:"0.544.0"},react:{type:"NPM",value:"19.1.1"}},entry:"index.tsx"},context:{"@yuntijs/ui":m,"lucide-react":y,react:e||(e=n.t(l,2))},renderOpts:{compile:function(){var c=i()(a()().mark(function v(){var u,f=arguments;return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.e(6768).then(n.bind(n,6768));case 2:return o.abrupt("return",(u=o.sent).default.apply(u,f));case 3:case"end":return o.stop()}},v)}));function p(){return c.apply(this,arguments)}return p}()}},"src-form-demo-tree":{component:l.memo(l.lazy(function(){return Promise.all([n.e(5217),n.e(1179),n.e(2622),n.e(4240),n.e(3112),n.e(9172),n.e(3748),n.e(6896),n.e(9534),n.e(3311),n.e(2433)]).then(n.bind(n,97125))})),asset:{type:"BLOCK",id:"src-form-demo-tree",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(19251).Z},"@ant-design/icons":{type:"NPM",value:"5.6.1"},"@yuntijs/ui":{type:"NPM",value:"2.0.0-beta.23"},"lucide-react":{type:"NPM",value:"0.544.0"},react:{type:"NPM",value:"19.1.1"},"./style.ts":{type:"FILE",value:n(1836).Z},"antd-style":{type:"NPM",value:"3.7.1"}},entry:"index.tsx"},context:{"./style.ts":h,"@ant-design/icons":I,"@yuntijs/ui":m,"lucide-react":y,react:e||(e=n.t(l,2)),"/home/runner/work/yunti-ui/yunti-ui/src/Form/demos/style.ts":h,"antd-style":x},renderOpts:{compile:function(){var c=i()(a()().mark(function v(){var u,f=arguments;return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.e(6768).then(n.bind(n,6768));case 2:return o.abrupt("return",(u=o.sent).default.apply(u,f));case 3:case"end":return o.stop()}},v)}));function p(){return c.apply(this,arguments)}return p}()}},"src-form-demo-playground":{component:l.memo(l.lazy(function(){return Promise.all([n.e(5217),n.e(1179),n.e(2622),n.e(4240),n.e(3112),n.e(9172),n.e(3748),n.e(6896),n.e(9534),n.e(3311),n.e(2433)]).then(n.bind(n,10804))})),asset:{type:"BLOCK",id:"src-form-demo-playground",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:n(90177).Z},"@lobehub/ui":{type:"NPM",value:"2.12.4"},"@yuntijs/ui":{type:"NPM",value:"2.0.0-beta.23"},antd:{type:"NPM",value:"5.27.3"},"lucide-react":{type:"NPM",value:"0.544.0"}},entry:"index.tsx"},context:{"@lobehub/ui/storybook":g,"@yuntijs/ui":m,antd:C,"lucide-react":y},renderOpts:{compile:function(){var c=i()(a()().mark(function v(){var u,f=arguments;return a()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,n.e(6768).then(n.bind(n,6768));case 2:return o.abrupt("return",(u=o.sent).default.apply(u,f));case 3:case"end":return o.stop()}},v)}));function p(){return c.apply(this,arguments)}return p}()}}}},2665:function(s,t,n){n.r(t),n.d(t,{useStyles:function(){return i}});var e=n(53649),r=n.n(e),a=n(75555),d,i=(0,a.kc)(function(l){var m=l.css,y=l.token,I=l.prefixCls;return{operation:m(d||(d=r()([`
      justify-content: flex-end;
    `])))}})},55383:function(s,t,n){n.r(t),n.d(t,{StyleProvider:function(){return e.V9},ThemeProvider:function(){return e.f6},createGlobalStyle:function(){return e.vJ},createInstance:function(){return e.Fs},createStyles:function(){return e.kc},createStylish:function(){return e.Yz},css:function(){return e.iv},cx:function(){return e.cx},extractStaticStyle:function(){return e.Y2},injectGlobal:function(){return e.hi},keyframes:function(){return e.F4},setupStyled:function(){return e.Us},styleManager:function(){return e.Rr},useAntdStylish:function(){return r.n},useAntdTheme:function(){return a.A},useAntdToken:function(){return d.S},useResponsive:function(){return i.F},useTheme:function(){return e.Fg},useThemeMode:function(){return l.r}});var e=n(75555),r=n(79171),a=n(83047),d=n(46117),i=n(7807),l=n(23856)},74901:function(s,t,n){n.r(t),n.d(t,{texts:function(){return e}});const e=[{value:"Based on ",paraId:0,tocIndex:0},{value:"antd form",paraId:0,tocIndex:0},{value:", add ",paraId:0,tocIndex:0},{value:"Form.CollapseList",paraId:0,tocIndex:0},{value:" component.",paraId:0,tocIndex:0},{value:"Form",paraId:1},{value:"see ",paraId:2,tocIndex:1},{value:"https://ant.design/components/form",paraId:2,tocIndex:1},{value:" .",paraId:2,tocIndex:1},{value:"Form.CollapseList",paraId:1},{value:`import { Form, Input } from '@yuntijs/ui';
import { VariableIcon } from 'lucide-react';

const FormCollapseList = Form.CollapseList;
interface FieldType {
  outputs?: {
    key: string;
    value: string;
  }[];
}

export default () => {
  const outputs = [
    {
      key: 'class',
      value: 'claas1',
    },
    {
      key: 'namespace',
      value: 'ns1',
    },
  ];
  return (
    <Form
      onValuesChange={(_, values) => console.log('values =>', values)}
      style={{ width: '100%' }}
      variant="filled"
    >
      <FormCollapseList
        columns={[
          {
            label: '\u53D8\u91CF\u540D',
            name: 'key',
            render: () => <Input maxLength={30} placeholder="\u8F93\u5165\u53D8\u91CF\u540D" showCount />,
          },
          {
            label: '\u53D8\u91CF\u503C',
            name: 'value',
            render: () => <Input placeholder="\u8F93\u5165\u53D8\u91CF\u503C" style={{ width: 360 }} />,
            rules: [{ required: true, message: '\u8BF7\u8F93\u5165\u53D8\u91CF\u503C' }],
          },
        ]}
        icon={VariableIcon}
        initialValue={outputs}
        name="outputs"
        title="\u8F93\u51FA\u53D8\u91CF"
        variant="block"
      />
    </Form>
  );
};
`,paraId:3,tocIndex:3},{value:"\u652F\u6301\u6811\u5F62\u5C55\u793A\u548C\u8F93\u5165\uFF0C\u5F53\u6570\u636E\u4E2D\u6709 ",paraId:4,tocIndex:4},{value:"children",paraId:4,tocIndex:4},{value:" \u5B57\u6BB5\u65F6\u4F1A\u81EA\u52A8\u5C55\u793A\u4E3A\u6811\u5F62\u8868\u683C\uFF0C\u5982\u679C\u4E0D\u9700\u8981\u6216\u914D\u7F6E\u4E3A\u5176\u4ED6\u5B57\u6BB5\u53EF\u4EE5\u7528 ",paraId:4,tocIndex:4},{value:"childrenColumnName",paraId:4,tocIndex:4},{value:" \u8FDB\u884C\u914D\u7F6E\u3002\u5728 column ",paraId:4,tocIndex:4},{value:"render",paraId:4,tocIndex:4},{value:" \u5C5E\u6027\u4E2D\u8FD4\u56DE\u4E86 ",paraId:4,tocIndex:4},{value:"operation",paraId:4,tocIndex:4},{value:"\uFF0C\u4E0E ",paraId:4,tocIndex:4},{value:"Form.List",paraId:4,tocIndex:4},{value:" \u7684 operation \u7528\u6CD5\u4E00\u81F4\uFF0C\u53EF\u4EE5\u7528\u6765\u6DFB\u52A0\u3001\u5220\u9664\u3001\u6392\u5E8F\u53F6\u5B50\u8282\u70B9\uFF0C\u53E6\u5916\u5728 ",paraId:4,tocIndex:4},{value:"operation",paraId:4,tocIndex:4},{value:" \u4E2D\u589E\u52A0\u4E86\u4E00\u4E2A ",paraId:4,tocIndex:4},{value:"update",paraId:4,tocIndex:4},{value:" \u65B9\u6CD5\uFF0C\u53EF\u7528\u4E8E\u624B\u52A8\u66F4\u65B0\u89C6\u56FE\u3002",paraId:4,tocIndex:4},{value:"\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E ",paraId:5,tocIndex:4},{value:"indentSize",paraId:5,tocIndex:4},{value:" \u4EE5\u63A7\u5236\u6BCF\u4E00\u5C42\u7684\u7F29\u8FDB\u5BBD\u5EA6\u3002",paraId:5,tocIndex:4},{value:"\u8BBE\u7F6E ",paraId:6,tocIndex:4},{value:"defaultExpandAllRows",paraId:6,tocIndex:4},{value:" \u53EF\u63A7\u5236\u521D\u59CB\u65F6\uFF0C\u662F\u5426\u5C55\u5F00\u6240\u6709\u884C\u3002",paraId:6,tocIndex:4},{value:`export const TreeList = () => {
  // \u63A8\u8350\u4F7F\u7528 useMemo \u6765\u5B9A\u4E49 columns\uFF0C\u51CF\u5C11\u7EC4\u4EF6\u6E32\u67D3\u6B21\u6570\uFF0C\u63D0\u5347\u6027\u80FD
  const columns: FormCollapseListColumn[] = useMemo(
    () => [
      // ...
      {
        render: (fieldName, index, operation, fieldPath) => {
          return (
            <Space size="small">
              <Button
                icon={<PlusOutlined />}
                // \u6DFB\u52A0\u53F6\u5B50\u8282\u70B9
                onClick={() => operation.add()}
                type="text"
              />
              <Button
                icon={<DeleteOutlined />}
                // \u5220\u9664\u5F53\u524D\u8282\u70B9
                onClick={() => operation.remove(fieldName)}
                type="text"
              />
            </Space>
          );
        },
      },
    ],
    []
  );

  return <FormCollapseList columns={columns} />;
};
`,paraId:7,tocIndex:4},{value:"Form.CollapseList",paraId:1},{value:"Form",paraId:1},{value:"see ",paraId:8,tocIndex:8},{value:"https://ant.design/components/form#api",paraId:8,tocIndex:8},{value:"Form.CollapseList",paraId:1}]},90177:function(s,t){t.Z=`import { StoryBook, useControls, useCreateStore } from '@lobehub/ui/storybook';
import { FormCollapseList, FormCollapseListProps, Input } from '@yuntijs/ui';
import { Form, Select } from 'antd';
import { VariableIcon } from 'lucide-react';

export default () => {
  const store = useCreateStore();
  const control: FormCollapseListProps | any = useControls(
    {
      name: 'outputs',
      title: '\u8F93\u51FA\u53D8\u91CF',
      fieldRemoveButton: true,
      readOnly: false,
      defaultActive: true,
      disabled: false,
      addOneFiledDefault: true,
      disableRemoveWhenOneField: true,
      maxFileds: 10,
      empty: '\u70B9\u51FB\u53F3\u4E0A\u89D2 + \u6DFB\u52A0',
      variant: {
        options: ['filled', 'outlined', 'borderless'],
        value: 'filled',
      },
      collapsible: true,
    },
    { store }
  );
  return (
    <StoryBook levaStore={store} style={{ width: '100%' }}>
      <Form style={{ width: '100%', height: '100%' }}>
        <FormCollapseList
          columns={[
            {
              label: '\u53D8\u91CF\u540D',
              name: 'key',
              render: () => <Input maxLength={30} placeholder="\u8F93\u5165\u53D8\u91CF\u540D" showCount />,
            },
            {
              label: '\u7C7B\u578B',
              name: 'type',
              width: 120,
              render: () => <Select options={[{ value: 'string' }, { value: 'number' }]} />,
            },
            {
              label: '\u53D8\u91CF\u503C',
              name: 'value',
              render: () => <Input placeholder="\u8F93\u5165\u53D8\u91CF\u503C" />,
              rules: [{ required: true, message: '\u8BF7\u8F93\u5165\u53D8\u91CF\u503C' }],
            },
          ]}
          icon={VariableIcon}
          {...control}
        />
      </Form>
    </StoryBook>
  );
};
`},19251:function(s,t){t.Z=`import { DeleteOutlined, FileDoneOutlined, PlusOutlined } from '@ant-design/icons';
import {
  Button,
  Divider,
  Flex,
  Form,
  type FormCollapseListColumn,
  Input,
  JsonViewer,
  Popover,
  Space,
  Tooltip,
} from '@yuntijs/ui';
import { VariableIcon } from 'lucide-react';
import { useMemo, useState } from 'react';

import { useStyles } from './style';

const FormCollapseList = Form.CollapseList;
interface FieldType {
  outputs?: {
    name: string;
    value: string;
    items?: FieldType['outputs'];
  }[];
}

const initialValues: FieldType = {
  outputs: [
    {
      name: 'class',
      value: 'claas1',
      items: [
        {
          name: 'c1',
          value: 'c1',
          items: [
            {
              name: 'c11',
              value: 'c11',
            },
          ],
        },
      ],
    },
    {
      name: 'namespace',
      value: 'ns1',
    },
  ],
};

export default () => {
  const { styles } = useStyles();
  const [form] = Form.useForm();

  const [values, setValues] = useState<FieldType>(initialValues);
  const outputs = Form.useWatch<[FieldType]>('outputs', form);
  // \u4F7F\u7528 useMemo \u5B9A\u4E49 columns\uFF0C\u51CF\u5C11\u7EC4\u4EF6\u6E32\u67D3\u6B21\u6570\uFF0C\u63D0\u5347\u6027\u80FD
  const columns: FormCollapseListColumn[] = useMemo(
    () => [
      {
        dependencies: parentFieldPath => [[...parentFieldPath, 'value']],
        label: '\u53D8\u91CF\u540D',
        name: 'name',
        render: () => <Input maxLength={30} placeholder="\u8F93\u5165\u53D8\u91CF\u540D" showCount />,
        rules: (parentFieldPath, index) => [
          { whitespace: true, required: true, message: '\u8BF7\u8F93\u5165\u53D8\u91CF\u540D' },
          ({ getFieldValue }) => ({
            validator(_rule, value) {
              const vars: FieldType['outputs'] = getFieldValue(parentFieldPath);
              if (vars?.some((v, vIndex) => vIndex !== index && v?.name === value)) {
                return Promise.reject(new Error('\u53D8\u91CF\u540D\u4E0D\u80FD\u91CD\u590D'));
              }
              return Promise.resolve();
            },
          }),
        ],
      },
      {
        label: '\u53D8\u91CF\u503C',
        name: 'value',
        render: () => <Input placeholder="\u8F93\u5165\u53D8\u91CF\u503C" />,
        rules: [{ required: true, message: '\u8BF7\u8F93\u5165\u53D8\u91CF\u503C' }],
      },
      {
        className: styles.operation,
        render: (fieldName, _index, operation, fieldPath) => {
          return (
            <Space size="small">
              <Tooltip title="\u6DFB\u52A0\u53F6\u5B50\u8282\u70B9">
                <Button
                  icon={<PlusOutlined />}
                  onClick={() => {
                    operation.add({ name: 'key' });
                    // \u5982\u679C\u6709\u624B\u52A8\u8BBE\u7F6E form \u8868\u5355\uFF0C\u53EF\u80FD\u4F1A\u51FA\u73B0\u6CA1\u6709\u6E32\u67D3\u7684\u95EE\u9898\uFF0C\u53EF\u4EE5\u7528 update \u65B9\u6CD5\u624B\u52A8\u89E6\u53D1
                    // operation.update();
                  }}
                  type="text"
                />
              </Tooltip>
              <Popover
                content={
                  <Form
                    onFieldsChange={changedFields => {
                      for (const field of changedFields) {
                        form.setFieldValue(field.name, field.value);
                      }
                    }}
                  >
                    <Form.Item name={[...fieldPath, 'desc']}>
                      <Input.TextArea placeholder="\u8BF7\u8F93\u5165\u63CF\u8FF0" />
                    </Form.Item>
                  </Form>
                }
                title="\u63CF\u8FF0"
                trigger="click"
              >
                <Button icon={<FileDoneOutlined />} type="text" />
              </Popover>
              <Button
                disabled={outputs.length === 1 && fieldPath.length === 2}
                icon={<DeleteOutlined />}
                onClick={() => operation.remove(fieldName)}
                type="text"
              />
            </Space>
          );
        },
      },
    ],
    [form, outputs?.length, styles.operation]
  );

  return (
    <Flex gap={6} style={{ width: '100%' }} vertical>
      <Form
        form={form}
        id="form11"
        initialValues={initialValues}
        onValuesChange={(_, values) => setValues(values)}
        variant="filled"
      >
        <FormCollapseList
          childrenColumnName="items"
          columns={columns}
          defaultExpandAllRows
          fieldRemoveButton={false}
          icon={VariableIcon}
          indentSize={16}
          name="outputs"
          title="\u8F93\u51FA\u53D8\u91CF"
          variant="filled"
        />
      </Form>
      <Divider
        content="Form value \u503C"
        dashed
        mode="expanded"
        orientation="left"
        orientationMargin={0}
      >
        <JsonViewer collapsed={false} src={values} />
      </Divider>
    </Flex>
  );
};
`},52644:function(s,t){t.Z=`import { Divider, Flex, Form, Highlighter, Input } from '@yuntijs/ui';
import { VariableIcon } from 'lucide-react';
import { useState } from 'react';

const FormCollapseList = Form.CollapseList;
interface FieldType {
  outputs?: {
    key: string;
    value: string;
    test: string;
  }[];
}

export default () => {
  const outputs = [
    {
      key: 'class',
      value: 'claas1',
      test: 'test1',
    },
    {
      key: 'namespace',
      value: 'ns1',
      test: 'test2',
    },
  ];

  const [values, setValues] = useState<FieldType>({ outputs });
  const [form] = Form.useForm();

  return (
    <Flex gap={6} style={{ width: '100%' }} vertical>
      <Form form={form} onValuesChange={(_, values) => setValues(values)} variant="filled">
        <FormCollapseList
          columns={[
            {
              dependencies: field => [['outputs', field.name, 'value']],
              label: '\u53D8\u91CF\u540D',
              name: 'key',
              render: () => <Input maxLength={30} placeholder="\u8F93\u5165\u53D8\u91CF\u540D" showCount />,
              rules: (_field, index) => [
                { whitespace: true, required: true, message: '\u8BF7\u8F93\u5165\u53D8\u91CF\u540D' },
                ({ getFieldValue }) => ({
                  validator(_rule, value) {
                    const vars: FieldType['outputs'] = getFieldValue('outputs');
                    if (vars?.some((v, vIndex) => vIndex !== index && v.key === value)) {
                      return Promise.reject(new Error('\u53D8\u91CF\u540D\u4E0D\u80FD\u91CD\u590D'));
                    }
                    return Promise.resolve();
                  },
                }),
              ],
            },
            {
              label: '\u53D8\u91CF\u503C',
              name: 'value',
              render: () => <Input placeholder="\u8F93\u5165\u53D8\u91CF\u503C" style={{ width: 360 }} />,
              rules: [{ required: true, message: '\u8BF7\u8F93\u5165\u53D8\u91CF\u503C' }],
            },
            {
              label: 'test',
              name: 'test',
            },
            {
              label: 'test2',
              name: 'test2',
              render: () => '\u65E0\u9700\u8BBE\u7F6E',
            },
          ]}
          icon={VariableIcon}
          initialValue={outputs}
          name="outputs"
          title="\u8F93\u51FA\u53D8\u91CF"
          variant="filled"
        />
      </Form>
      <Divider
        content="Form value \u503C"
        dashed
        mode="expanded"
        orientation="left"
        orientationMargin={0}
      >
        <Highlighter language="json">{JSON.stringify(values, null, 2)}</Highlighter>
      </Divider>
    </Flex>
  );
};
`},1836:function(s,t){t.Z=`import { createStyles } from 'antd-style';

export const useStyles = createStyles(({ css, token, prefixCls }) => {
  return {
    operation: css\`
      justify-content: flex-end;
    \`,
  };
});
`}}]);
