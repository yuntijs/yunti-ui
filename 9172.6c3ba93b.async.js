!(function(){"use strict";var cr=Object.defineProperty,lr=Object.defineProperties;var ur=Object.getOwnPropertyDescriptors;var xt=Object.getOwnPropertySymbols;var Dn=Object.prototype.hasOwnProperty,Hn=Object.prototype.propertyIsEnumerable;var ln=(W,U,G)=>U in W?cr(W,U,{enumerable:!0,configurable:!0,writable:!0,value:G}):W[U]=G,x=(W,U)=>{for(var G in U||(U={}))Dn.call(U,G)&&ln(W,G,U[G]);if(xt)for(var G of xt(U))Hn.call(U,G)&&ln(W,G,U[G]);return W},H=(W,U)=>lr(W,ur(U));var jn=(W,U)=>{var G={};for(var B in W)Dn.call(W,B)&&U.indexOf(B)<0&&(G[B]=W[B]);if(W!=null&&xt)for(var B of xt(W))U.indexOf(B)<0&&Hn.call(W,B)&&(G[B]=W[B]);return G};var b=(W,U,G)=>ln(W,typeof U!="symbol"?U+"":U,G);var V=(W,U,G)=>new Promise((B,j)=>{var ye=ne=>{try{Se(G.next(ne))}catch(fe){j(fe)}},be=ne=>{try{Se(G.throw(ne))}catch(fe){j(fe)}},Se=ne=>ne.done?B(ne.value):Promise.resolve(ne.value).then(ye,be);Se((G=G.apply(W,U)).next())});(self.webpackChunk_yuntijs_ui=self.webpackChunk_yuntijs_ui||[]).push([[9172],{19172:function(W,U,G){G.d(U,{Z5:function(){return B},Gx:function(){return Ze},i_:function(){return Q},AX:function(){return Ln},FJ:function(){return ar},Ew:function(){return on},CO:function(){return rr},S2:function(){return Et},ex:function(){return Pn},Xw:function(){return sn},iX:function(){return ir},y6:function(){return or},k_:function(){return er},Sj:function(){return i},f3:function(){return sr},Vl:function(){return a},qn:function(){return nn},IY:function(){return wn},DN:function(){return ge},_l:function(){return Ee},ri:function(){return le},vH:function(){return Qe},xK:function(){return Gn},n5:function(){return xn},vg:function(){return Je},Ho:function(){return vt},F3:function(){return pe},uq:function(){return Ie},NW:function(){return s},n9:function(){return e},V8:function(){return l},qo:function(){return Tt},Bo:function(){return _n},dO:function(){return bn},is:function(){return Rn},E0:function(){return I},Jp:function(){return On}});class B extends Error{constructor(r){super(r),this.name="ShikiError"}}var j=G(46185),ye=G(69201),be=G(51279),Se=G(57300);const ne=/["&'<>`]/g,fe=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,je=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,Ae=/[|\\{}()[\]^$+*?.]/g,$e=new WeakMap;function ot(o,r){if(o=o.replace(r.subset?at(r.subset):ne,n),r.subset||r.escapeOnly)return o;return o.replace(fe,t).replace(je,n);function t(c,u,h){return r.format((c.charCodeAt(0)-55296)*1024+c.charCodeAt(1)-56320+65536,h.charCodeAt(u+2),r)}function n(c,u,h){return r.format(c.charCodeAt(0),h.charCodeAt(u+1),r)}}function at(o){let r=$e.get(o);return r||(r=ct(o),$e.set(o,r)),r}function ct(o){const r=[];let t=-1;for(;++t<o.length;)r.push(o[t].replace(Ae,"\\$&"));return new RegExp("(?:"+r.join("|")+")","g")}const lt=/[\dA-Fa-f]/;function ve(o,r,t){const n="&#x"+o.toString(16).toUpperCase();return t&&r&&!lt.test(String.fromCharCode(r))?n:n+";"}const Ue=/\d/;function Gt(o,r,t){const n="&#"+String(o);return t&&r&&!Ue.test(String.fromCharCode(r))?n:n+";"}const Bt=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Oe={nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203E",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",quot:'"',amp:"&",lt:"<",gt:">",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203A",euro:"\u20AC"},Mt=["cent","copy","divide","gt","lt","not","para","times"],ut={}.hasOwnProperty,Pe={};let xe;for(xe in Oe)ut.call(Oe,xe)&&(Pe[Oe[xe]]=xe);const Dt=/[^\dA-Za-z]/;function Ht(o,r,t,n){const c=String.fromCharCode(o);if(ut.call(Pe,c)){const u=Pe[c],h="&"+u;return t&&Bt.includes(u)&&!Mt.includes(u)&&(!n||r&&r!==61&&Dt.test(String.fromCharCode(r)))?h:h+";"}return""}function Fe(o,r,t){let n=ve(o,r,t.omitOptionalSemicolons),c;if((t.useNamedReferences||t.useShortestReferences)&&(c=Ht(o,r,t.omitOptionalSemicolons,t.attribute)),(t.useShortestReferences||!c)&&t.useShortestReferences){const u=Gt(o,r,t.omitOptionalSemicolons);u.length<n.length&&(n=u)}return c&&(!t.useShortestReferences||c.length<n.length)?c:n}function de(o,r){return ot(o,Object.assign({format:Fe},r))}function Le(o,r){return core(o,Object.assign({format:formatBasic},r))}const hn=/^>|^->|<!--|-->|--!>|<!-$/g,fn=[">"],Ge=["<",">"];function ht(o,r,t,n){return n.settings.bogusComments?"<?"+de(o.value,Object.assign({},n.settings.characterReferences,{subset:fn}))+">":"<!--"+o.value.replace(hn,c)+"-->";function c(u){return de(u,Object.assign({},n.settings.characterReferences,{subset:Ge}))}}function jt(o,r,t,n){return"<!"+(n.settings.upperDoctype?"DOCTYPE":"doctype")+(n.settings.tightDoctype?"":" ")+"html>"}var ft=G(17935),dt=G(57529),Ce=G(43731),$t=G(83135),We=G(58735);const z=Re(1),mt=Re(-1),ze=[];function Re(o){return r;function r(t,n,c){const u=t?t.children:ze;let h=(n||0)+o,m=u[h];if(!c)for(;m&&(0,We.Q)(m);)h+=o,m=u[h];return m}}const Be={}.hasOwnProperty;function pt(o){return r;function r(t,n,c){return Be.call(o,t.tagName)&&o[t.tagName](t,n,c)}}const qe=pt({body:Ft,caption:Ve,colgroup:Ve,dd:dn,dt:_t,head:Ve,html:Ut,li:Wt,optgroup:bt,option:mn,p:gt,rp:yt,rt:yt,tbody:we,td:Ke,tfoot:zt,th:Ke,thead:pn,tr:qt});function Ve(o,r,t){const n=z(t,r,!0);return!n||n.type!=="comment"&&!(n.type==="text"&&(0,We.Q)(n.value.charAt(0)))}function Ut(o,r,t){const n=z(t,r);return!n||n.type!=="comment"}function Ft(o,r,t){const n=z(t,r);return!n||n.type!=="comment"}function gt(o,r,t){const n=z(t,r);return n?n.type==="element"&&(n.tagName==="address"||n.tagName==="article"||n.tagName==="aside"||n.tagName==="blockquote"||n.tagName==="details"||n.tagName==="div"||n.tagName==="dl"||n.tagName==="fieldset"||n.tagName==="figcaption"||n.tagName==="figure"||n.tagName==="footer"||n.tagName==="form"||n.tagName==="h1"||n.tagName==="h2"||n.tagName==="h3"||n.tagName==="h4"||n.tagName==="h5"||n.tagName==="h6"||n.tagName==="header"||n.tagName==="hgroup"||n.tagName==="hr"||n.tagName==="main"||n.tagName==="menu"||n.tagName==="nav"||n.tagName==="ol"||n.tagName==="p"||n.tagName==="pre"||n.tagName==="section"||n.tagName==="table"||n.tagName==="ul"):!t||!(t.type==="element"&&(t.tagName==="a"||t.tagName==="audio"||t.tagName==="del"||t.tagName==="ins"||t.tagName==="map"||t.tagName==="noscript"||t.tagName==="video"))}function Wt(o,r,t){const n=z(t,r);return!n||n.type==="element"&&n.tagName==="li"}function _t(o,r,t){const n=z(t,r);return!!(n&&n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd"))}function dn(o,r,t){const n=z(t,r);return!n||n.type==="element"&&(n.tagName==="dt"||n.tagName==="dd")}function yt(o,r,t){const n=z(t,r);return!n||n.type==="element"&&(n.tagName==="rp"||n.tagName==="rt")}function bt(o,r,t){const n=z(t,r);return!n||n.type==="element"&&n.tagName==="optgroup"}function mn(o,r,t){const n=z(t,r);return!n||n.type==="element"&&(n.tagName==="option"||n.tagName==="optgroup")}function pn(o,r,t){const n=z(t,r);return!!(n&&n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot"))}function we(o,r,t){const n=z(t,r);return!n||n.type==="element"&&(n.tagName==="tbody"||n.tagName==="tfoot")}function zt(o,r,t){return!z(t,r)}function qt(o,r,t){const n=z(t,r);return!n||n.type==="element"&&n.tagName==="tr"}function Ke(o,r,t){const n=z(t,r);return!n||n.type==="element"&&(n.tagName==="td"||n.tagName==="th")}const Ye=pt({body:ke,colgroup:Ne,head:St,html:Me,tbody:Ct});function Me(o){const r=z(o,-1);return!r||r.type!=="comment"}function St(o){const r=new Set;for(const n of o.children)if(n.type==="element"&&(n.tagName==="base"||n.tagName==="title")){if(r.has(n.tagName))return!1;r.add(n.tagName)}const t=o.children[0];return!t||t.type==="element"}function ke(o){const r=z(o,-1,!0);return!r||r.type!=="comment"&&!(r.type==="text"&&(0,We.Q)(r.value.charAt(0)))&&!(r.type==="element"&&(r.tagName==="meta"||r.tagName==="link"||r.tagName==="script"||r.tagName==="style"||r.tagName==="template"))}function Ne(o,r,t){const n=mt(t,r),c=z(o,-1,!0);return t&&n&&n.type==="element"&&n.tagName==="colgroup"&&qe(n,t.children.indexOf(n),t)?!1:!!(c&&c.type==="element"&&c.tagName==="col")}function Ct(o,r,t){const n=mt(t,r),c=z(o,-1);return t&&n&&n.type==="element"&&(n.tagName==="thead"||n.tagName==="tbody")&&qe(n,t.children.indexOf(n),t)?!1:!!(c&&c.type==="element"&&c.tagName==="tr")}const me={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function Vt(o,r,t,n){const c=n.schema,u=c.space==="svg"?!1:n.settings.omitOptionalTags;let h=c.space==="svg"?n.settings.closeEmptyElements:n.settings.voids.includes(o.tagName.toLowerCase());const m=[];let g;c.space==="html"&&o.tagName==="svg"&&(n.schema=be.YP);const _=Kt(n,o.properties),R=n.all(c.space==="html"&&o.tagName==="template"?o.content:o);return n.schema=c,R&&(h=!1),(_||!u||!Ye(o,r,t))&&(m.push("<",o.tagName,_?" "+_:""),h&&(c.space==="svg"||n.settings.closeSelfClosing)&&(g=_.charAt(_.length-1),(!n.settings.tightSelfClosing||g==="/"||g&&g!=='"'&&g!=="'")&&m.push(" "),m.push("/")),m.push(">")),m.push(R),!h&&(!u||!qe(o,r,t))&&m.push("</"+o.tagName+">"),m.join("")}function Kt(o,r){const t=[];let n=-1,c;if(r){for(c in r)if(r[c]!==null&&r[c]!==void 0){const u=gn(o,c,r[c]);u&&t.push(u)}}for(;++n<t.length;){const u=o.settings.tightAttributes?t[n].charAt(t[n].length-1):void 0;n!==t.length-1&&u!=='"'&&u!=="'"&&(t[n]+=" ")}return t.join("")}function gn(o,r,t){const n=(0,Ce.s)(o.schema,r),c=o.settings.allowParseErrors&&o.schema.space==="html"?0:1,u=o.settings.allowDangerousCharacters?0:1;let h=o.quote,m;if(n.overloadedBoolean&&(t===n.attribute||t==="")?t=!0:(n.boolean||n.overloadedBoolean)&&(typeof t!="string"||t===n.attribute||t==="")&&(t=!!t),t==null||t===!1||typeof t=="number"&&Number.isNaN(t))return"";const g=de(n.attribute,Object.assign({},o.settings.characterReferences,{subset:me.name[c][u]}));return t===!0||(t=Array.isArray(t)?(n.commaSeparated?dt.P:$t.P)(t,{padLeft:!o.settings.tightCommaSeparatedLists}):String(t),o.settings.collapseEmptyAttributes&&!t)?g:(o.settings.preferUnquoted&&(m=de(t,Object.assign({},o.settings.characterReferences,{attribute:!0,subset:me.unquoted[c][u]}))),m!==t&&(o.settings.quoteSmart&&(0,ft.w)(t,h)>(0,ft.w)(t,o.alternative)&&(h=o.alternative),m=h+de(t,Object.assign({},o.settings.characterReferences,{subset:(h==="'"?me.single:me.double)[c][u],attribute:!0}))+h),g+(m&&"="+m))}const Rt=["<","&"];function Xe(o,r,t,n){return t&&t.type==="element"&&(t.tagName==="script"||t.tagName==="style")?o.value:de(o.value,Object.assign({},n.settings.characterReferences,{subset:Rt}))}function wt(o,r,t,n){return n.settings.allowDangerousHtml?o.value:Xe(o,r,t,n)}function Yt(o,r,t,n){return n.all(o)}const Xt=(0,Se.z)("type",{invalid:Jt,unknown:Qt,handlers:{comment:ht,doctype:jt,element:Vt,raw:wt,root:Yt,text:Xe}});function Jt(o){throw new Error("Expected node, not `"+o+"`")}function Qt(o){const r=o;throw new Error("Cannot compile unknown node `"+r.type+"`")}const kt={},Zt={},Nt=[];function Te(o,r){const t=r||kt,n=t.quote||'"',c=n==='"'?"'":'"';if(n!=='"'&&n!=="'")throw new Error("Invalid quote `"+n+"`, expected `'` or `\"`");return{one:en,all:tn,settings:{omitOptionalTags:t.omitOptionalTags||!1,allowParseErrors:t.allowParseErrors||!1,allowDangerousCharacters:t.allowDangerousCharacters||!1,quoteSmart:t.quoteSmart||!1,preferUnquoted:t.preferUnquoted||!1,tightAttributes:t.tightAttributes||!1,upperDoctype:t.upperDoctype||!1,tightDoctype:t.tightDoctype||!1,bogusComments:t.bogusComments||!1,tightCommaSeparatedLists:t.tightCommaSeparatedLists||!1,tightSelfClosing:t.tightSelfClosing||!1,collapseEmptyAttributes:t.collapseEmptyAttributes||!1,allowDangerousHtml:t.allowDangerousHtml||!1,voids:t.voids||ye.z,characterReferences:t.characterReferences||Zt,closeSelfClosing:t.closeSelfClosing||!1,closeEmptyElements:t.closeEmptyElements||!1},schema:t.space==="svg"?be.YP:be.dy,quote:n,alternative:c}.one(Array.isArray(o)?{type:"root",children:o}:o,void 0,void 0)}function en(o,r,t){return Xt(o,r,t,this)}function tn(o){const r=[],t=o&&o.children||Nt;let n=-1;for(;++n<t.length;)r[n]=this.one(t[n],n,o);return r.join("")}function pe(o,r){const t=typeof o=="string"?{}:x({},o.colorReplacements),n=typeof o=="string"?o:o.name;for(const[c,u]of Object.entries((r==null?void 0:r.colorReplacements)||{}))typeof u=="string"?t[c]=u:c===n&&Object.assign(t,u);return t}function Q(o,r){return o&&((r==null?void 0:r[o==null?void 0:o.toLowerCase()])||o)}function Tt(o){return Array.isArray(o)?o:[o]}function Je(o){return V(this,null,function*(){return Promise.resolve(typeof o=="function"?o():o).then(r=>r.default||r)})}function Ee(o){return!o||["plaintext","txt","text","plain"].includes(o)}function le(o){return o==="ansi"||Ee(o)}function ge(o){return o==="none"}function Qe(o){return ge(o)}function Ze(o,r){var n;if(!r)return o;o.properties||(o.properties={}),(n=o.properties).class||(n.class=[]),typeof o.properties.class=="string"&&(o.properties.class=o.properties.class.split(/\s+/g)),Array.isArray(o.properties.class)||(o.properties.class=[]);const t=Array.isArray(r)?r:r.split(/\s+/g);for(const c of t)c&&!o.properties.class.includes(c)&&o.properties.class.push(c);return o}function Ie(o,r=!1){var u;const t=o.split(/(\r?\n)/g);let n=0;const c=[];for(let h=0;h<t.length;h+=2){const m=r?t[h]+(t[h+1]||""):t[h];c.push([m,n]),n+=t[h].length,n+=((u=t[h+1])==null?void 0:u.length)||0}return c}function Et(o){const r=Ie(o,!0).map(([c])=>c);function t(c){if(c===o.length)return{line:r.length-1,character:r[r.length-1].length};let u=c,h=0;for(const m of r){if(u<m.length)break;u-=m.length,h++}return{line:h,character:u}}function n(c,u){let h=0;for(let m=0;m<c;m++)h+=r[m].length;return h+=u,h}return{lines:r,indexToPos:t,posToIndex:n}}function nn(o,r,t){const n=new Set;for(const u of o.matchAll(/lang=["']([\w-]+)["']/g))n.add(u[1]);for(const u of o.matchAll(/(?:```|~~~)([\w-]+)/g))n.add(u[1]);for(const u of o.matchAll(/\\begin\{([\w-]+)\}/g))n.add(u[1]);if(!t)return Array.from(n);const c=t.getBundledLanguages();return Array.from(n).filter(u=>u&&c[u])}const te="light-dark()",Z=["color","background-color"];function s(o,r){let t=0;const n=[];for(const c of r)c>t&&n.push(H(x({},o),{content:o.content.slice(t,c),offset:o.offset+t})),t=c;return t<o.content.length&&n.push(H(x({},o),{content:o.content.slice(t),offset:o.offset+t})),n}function e(o,r){const t=Array.from(r instanceof Set?r:new Set(r)).sort((n,c)=>n-c);return t.length?o.map(n=>n.flatMap(c=>{const u=t.filter(h=>c.offset<h&&h<c.offset+c.content.length).map(h=>h-c.offset).sort((h,m)=>h-m);return u.length?s(c,u):c})):o}function i(o,r,t,n,c="css-vars"){const u={content:o.content,explanation:o.explanation,offset:o.offset},h=r.map(R=>a(o.variants[R])),m=new Set(h.flatMap(R=>Object.keys(R))),g={},_=(R,w)=>{const S=w==="color"?"":w==="background-color"?"-bg":`-${w}`;return t+r[R]+(w==="color"?"":S)};return h.forEach((R,w)=>{for(const S of m){const E=R[S]||"inherit";if(w===0&&n&&Z.includes(S))if(n===te&&h.length>1){const N=r.findIndex(k=>k==="light"),A=r.findIndex(k=>k==="dark");if(N===-1||A===-1)throw new B('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const L=h[N][S]||"inherit",v=h[A][S]||"inherit";g[S]=`light-dark(${L}, ${v})`,c==="css-vars"&&(g[_(w,S)]=E)}else g[S]=E;else c==="css-vars"&&(g[_(w,S)]=E)}}),u.htmlStyle=g,u}function a(o){const r={};if(o.color&&(r.color=o.color),o.bgColor&&(r["background-color"]=o.bgColor),o.fontStyle){o.fontStyle&j.Hd.Italic&&(r["font-style"]="italic"),o.fontStyle&j.Hd.Bold&&(r["font-weight"]="bold");const t=[];o.fontStyle&j.Hd.Underline&&t.push("underline"),o.fontStyle&j.Hd.Strikethrough&&t.push("line-through"),t.length&&(r["text-decoration"]=t.join(" "))}return r}function l(o){return typeof o=="string"?o:Object.entries(o).map(([r,t])=>`${r}:${t}`).join(";")}const f=new WeakMap;function p(o,r){f.set(o,r)}function y(o){return f.get(o)}class d{constructor(...r){b(this,"_stacks",{});b(this,"lang");if(r.length===2){const[t,n]=r;this.lang=n,this._stacks=t}else{const[t,n,c]=r;this.lang=n,this._stacks={[c]:t}}}get themes(){return Object.keys(this._stacks)}get theme(){return this.themes[0]}get _stack(){return this._stacks[this.theme]}static initial(r,t){return new d(Object.fromEntries(Tt(t).map(n=>[n,j._X])),r)}getInternalStack(r=this.theme){return this._stacks[r]}getScopes(r=this.theme){return C(this._stacks[r])}toJSON(){return{lang:this.lang,theme:this.theme,themes:this.themes,scopes:this.getScopes()}}}function C(o){const r=[],t=new Set;function n(c){var h;if(t.has(c))return;t.add(c);const u=(h=c==null?void 0:c.nameScopesList)==null?void 0:h.scopeName;u&&r.push(u),c.parent&&n(c.parent)}return n(o),r}function T(o,r){if(!(o instanceof d))throw new B("Invalid grammar state");return o.getInternalStack(r)}function I(){const o=new WeakMap;function r(t){if(!o.has(t.meta)){let n=function(h){if(typeof h=="number"){if(h<0||h>t.source.length)throw new B(`Invalid decoration offset: ${h}. Code length: ${t.source.length}`);return H(x({},c.indexToPos(h)),{offset:h})}else{const m=c.lines[h.line];if(m===void 0)throw new B(`Invalid decoration position ${JSON.stringify(h)}. Lines length: ${c.lines.length}`);let g=h.character;if(g<0&&(g=m.length+g),g<0||g>m.length)throw new B(`Invalid decoration position ${JSON.stringify(h)}. Line ${h.line} length: ${m.length}`);return H(x({},h),{character:g,offset:c.posToIndex(h.line,g)})}};const c=Et(t.source),u=(t.options.decorations||[]).map(h=>H(x({},h),{start:n(h.start),end:n(h.end)}));D(u),o.set(t.meta,{decorations:u,converter:c,source:t.source})}return o.get(t.meta)}return{name:"shiki:decorations",tokens(t){var h;if(!((h=this.options.decorations)!=null&&h.length))return;const c=r(this).decorations.flatMap(m=>[m.start.offset,m.end.offset]);return e(t,c)},code(t){var R;if(!((R=this.options.decorations)!=null&&R.length))return;const n=r(this),c=Array.from(t.children).filter(w=>w.type==="element"&&w.tagName==="span");if(c.length!==n.converter.lines.length)throw new B(`Number of lines in code element (${c.length}) does not match the number of lines in the source (${n.converter.lines.length}). Failed to apply decorations.`);function u(w,S,E,N){const A=c[w];let L="",v=-1,k=-1;if(S===0&&(v=0),E===0&&(k=0),E===Number.POSITIVE_INFINITY&&(k=A.children.length),v===-1||k===-1)for(let $=0;$<A.children.length;$++)L+=O(A.children[$]),v===-1&&L.length===S&&(v=$+1),k===-1&&L.length===E&&(k=$+1);if(v===-1)throw new B(`Failed to find start index for decoration ${JSON.stringify(N.start)}`);if(k===-1)throw new B(`Failed to find end index for decoration ${JSON.stringify(N.end)}`);const M=A.children.slice(v,k);if(!N.alwaysWrap&&M.length===A.children.length)m(A,N,"line");else if(!N.alwaysWrap&&M.length===1&&M[0].type==="element")m(M[0],N,"token");else{const $={type:"element",tagName:"span",properties:{},children:M};m($,N,"wrapper"),A.children.splice(v,M.length,$)}}function h(w,S){c[w]=m(c[w],S,"line")}function m(w,S,E){var L;const N=S.properties||{},A=S.transform||(v=>v);return w.tagName=S.tagName||"span",w.properties=H(x(x({},w.properties),N),{class:w.properties.class}),(L=S.properties)!=null&&L.class&&Ze(w,S.properties.class),w=A(w,E)||w,w}const g=[],_=n.decorations.sort((w,S)=>S.start.offset-w.start.offset||w.end.offset-S.end.offset);for(const w of _){const{start:S,end:E}=w;if(S.line===E.line)u(S.line,S.character,E.character,w);else if(S.line<E.line){u(S.line,S.character,Number.POSITIVE_INFINITY,w);for(let N=S.line+1;N<E.line;N++)g.unshift(()=>h(N,w));u(E.line,0,E.character,w)}}g.forEach(w=>w())}}}function D(o){for(let r=0;r<o.length;r++){const t=o[r];if(t.start.offset>t.end.offset)throw new B(`Invalid decoration range: ${JSON.stringify(t.start)} - ${JSON.stringify(t.end)}`);for(let n=r+1;n<o.length;n++){const c=o[n],u=t.start.offset<=c.start.offset&&c.start.offset<t.end.offset,h=t.start.offset<c.end.offset&&c.end.offset<=t.end.offset,m=c.start.offset<=t.start.offset&&t.start.offset<c.end.offset,g=c.start.offset<t.end.offset&&t.end.offset<=c.end.offset;if(u||h||m||g){if(u&&h||m&&g||m&&t.start.offset===t.end.offset||h&&c.start.offset===c.end.offset)continue;throw new B(`Decorations ${JSON.stringify(t.start)} and ${JSON.stringify(c.start)} intersect.`)}}}}function O(o){return o.type==="text"?o.value:o.type==="element"?o.children.map(O).join(""):""}const P=[I()];function J(o){const r=K(o.transformers||[]);return[...r.pre,...r.normal,...r.post,...P]}function K(o){const r=[],t=[],n=[];for(const c of o)switch(c.enforce){case"pre":r.push(c);break;case"post":t.push(c);break;default:n.push(c)}return{pre:r,post:t,normal:n}}var q=["black","red","green","yellow","blue","magenta","cyan","white","brightBlack","brightRed","brightGreen","brightYellow","brightBlue","brightMagenta","brightCyan","brightWhite"],Y={1:"bold",2:"dim",3:"italic",4:"underline",7:"reverse",8:"hidden",9:"strikethrough"};function _e(o,r){const t=o.indexOf("\x1B",r);if(t!==-1&&o[t+1]==="["){const n=o.indexOf("m",t);if(n!==-1)return{sequence:o.substring(t+2,n).split(";"),startPosition:t,position:n+1}}return{position:o.length}}function oe(o){const r=o.shift();if(r==="2"){const t=o.splice(0,3).map(n=>Number.parseInt(n));return t.length!==3||t.some(n=>Number.isNaN(n))?void 0:{type:"rgb",rgb:t}}else if(r==="5"){const t=o.shift();if(t)return{type:"table",index:Number(t)}}}function re(o){const r=[];for(;o.length>0;){const t=o.shift();if(!t)continue;const n=Number.parseInt(t);if(!Number.isNaN(n))if(n===0)r.push({type:"resetAll"});else if(n<=9)Y[n]&&r.push({type:"setDecoration",value:Y[n]});else if(n<=29){const c=Y[n-20];c&&(r.push({type:"resetDecoration",value:c}),c==="dim"&&r.push({type:"resetDecoration",value:"bold"}))}else if(n<=37)r.push({type:"setForegroundColor",value:{type:"named",name:q[n-30]}});else if(n===38){const c=oe(o);c&&r.push({type:"setForegroundColor",value:c})}else if(n===39)r.push({type:"resetForegroundColor"});else if(n<=47)r.push({type:"setBackgroundColor",value:{type:"named",name:q[n-40]}});else if(n===48){const c=oe(o);c&&r.push({type:"setBackgroundColor",value:c})}else n===49?r.push({type:"resetBackgroundColor"}):n===53?r.push({type:"setDecoration",value:"overline"}):n===55?r.push({type:"resetDecoration",value:"overline"}):n>=90&&n<=97?r.push({type:"setForegroundColor",value:{type:"named",name:q[n-90+8]}}):n>=100&&n<=107&&r.push({type:"setBackgroundColor",value:{type:"named",name:q[n-100+8]}})}return r}function et(){let o=null,r=null,t=new Set;return{parse(n){const c=[];let u=0;do{const h=_e(n,u),m=h.sequence?n.substring(u,h.startPosition):n.substring(u);if(m.length>0&&c.push({value:m,foreground:o,background:r,decorations:new Set(t)}),h.sequence){const g=re(h.sequence);for(const _ of g)_.type==="resetAll"?(o=null,r=null,t.clear()):_.type==="resetForegroundColor"?o=null:_.type==="resetBackgroundColor"?r=null:_.type==="resetDecoration"&&t.delete(_.value);for(const _ of g)_.type==="setForegroundColor"?o=_.value:_.type==="setBackgroundColor"?r=_.value:_.type==="setDecoration"&&t.add(_.value)}u=h.position}while(u<n.length);return c}}}var tt={black:"#000000",red:"#bb0000",green:"#00bb00",yellow:"#bbbb00",blue:"#0000bb",magenta:"#ff00ff",cyan:"#00bbbb",white:"#eeeeee",brightBlack:"#555555",brightRed:"#ff5555",brightGreen:"#00ff00",brightYellow:"#ffff55",brightBlue:"#5555ff",brightMagenta:"#ff55ff",brightCyan:"#55ffff",brightWhite:"#ffffff"};function Fn(o=tt){function r(m){return o[m]}function t(m){return`#${m.map(g=>Math.max(0,Math.min(g,255)).toString(16).padStart(2,"0")).join("")}`}let n;function c(){if(n)return n;n=[];for(let _=0;_<q.length;_++)n.push(r(q[_]));let m=[0,95,135,175,215,255];for(let _=0;_<6;_++)for(let R=0;R<6;R++)for(let w=0;w<6;w++)n.push(t([m[_],m[R],m[w]]));let g=8;for(let _=0;_<24;_++,g+=10)n.push(t([g,g,g]));return n}function u(m){return c()[m]}function h(m){switch(m.type){case"named":return r(m.name);case"rgb":return t(m.rgb);case"table":return u(m.index)}}return{value:h}}const Wn={black:"#000000",red:"#cd3131",green:"#0DBC79",yellow:"#E5E510",blue:"#2472C8",magenta:"#BC3FBC",cyan:"#11A8CD",white:"#E5E5E5",brightBlack:"#666666",brightRed:"#F14C4C",brightGreen:"#23D18B",brightYellow:"#F5F543",brightBlue:"#3B8EEA",brightMagenta:"#D670D6",brightCyan:"#29B8DB",brightWhite:"#FFFFFF"};function _n(o,r,t){const n=pe(o,t),c=Ie(r),u=Object.fromEntries(q.map(g=>{var w;const _=`terminal.ansi${g[0].toUpperCase()}${g.substring(1)}`,R=(w=o.colors)==null?void 0:w[_];return[g,R||Wn[g]]})),h=Fn(u),m=et();return c.map(g=>m.parse(g[0]).map(_=>{let R,w;_.decorations.has("reverse")?(R=_.background?h.value(_.background):o.bg,w=_.foreground?h.value(_.foreground):o.fg):(R=_.foreground?h.value(_.foreground):o.fg,w=_.background?h.value(_.background):void 0),R=Q(R,n),w=Q(w,n),_.decorations.has("dim")&&(R=zn(R));let S=j.Hd.None;return _.decorations.has("bold")&&(S|=j.Hd.Bold),_.decorations.has("italic")&&(S|=j.Hd.Italic),_.decorations.has("underline")&&(S|=j.Hd.Underline),_.decorations.has("strikethrough")&&(S|=j.Hd.Strikethrough),{content:_.value,offset:g[1],color:R,bgColor:w,fontStyle:S}}))}function zn(o){const r=o.match(/#([0-9a-f]{3})([0-9a-f]{3})?([0-9a-f]{2})?/i);if(r)if(r[3]){const n=Math.round(Number.parseInt(r[3],16)/2).toString(16).padStart(2,"0");return`#${r[1]}${r[2]}${n}`}else return r[2]?`#${r[1]}${r[2]}80`:`#${Array.from(r[1]).map(n=>`${n}${n}`).join("")}80`;const t=o.match(/var\((--[\w-]+-ansi-[\w-]+)\)/);return t?`var(${t[1]}-dim)`:o}function It(o,r,t={}){const{lang:n="text",theme:c=o.getLoadedThemes()[0]}=t;if(Ee(n)||ge(c))return Ie(r).map(g=>[{content:g[0],offset:g[1]}]);const{theme:u,colorMap:h}=o.setTheme(c);if(n==="ansi")return _n(u,r,t);const m=o.getLanguage(n);if(t.grammarState){if(t.grammarState.lang!==m.name)throw new B(`Grammar state language "${t.grammarState.lang}" does not match highlight language "${m.name}"`);if(!t.grammarState.themes.includes(u.name))throw new B(`Grammar state themes "${t.grammarState.themes}" do not contain highlight theme "${u.name}"`)}return bn(r,m,u,h,t)}function yn(...o){if(o.length===2)return y(o[1]);const[r,t,n={}]=o,{lang:c="text",theme:u=r.getLoadedThemes()[0]}=n;if(Ee(c)||ge(u))throw new B("Plain language does not have grammar state");if(c==="ansi")throw new B("ANSI language does not have grammar state");const{theme:h,colorMap:m}=r.setTheme(u),g=r.getLanguage(c);return new d(At(t,g,h,m,n).stateStack,g.name,h.name)}function bn(o,r,t,n,c){const u=At(o,r,t,n,c),h=new d(At(o,r,t,n,c).stateStack,r.name,t.name);return p(u.tokens,h),u.tokens}function At(o,r,t,n,c){var S;const u=pe(t,c),{tokenizeMaxLineLength:h=0,tokenizeTimeLimit:m=500}=c,g=Ie(o);let _=c.grammarState?(S=T(c.grammarState,t.name))!=null?S:j._X:c.grammarContextCode!=null?At(c.grammarContextCode,r,t,n,H(x({},c),{grammarState:void 0,grammarContextCode:void 0})).stateStack:j._X,R=[];const w=[];for(let E=0,N=g.length;E<N;E++){const[A,L]=g[E];if(A===""){R=[],w.push([]);continue}if(h>0&&A.length>=h){R=[],w.push([{content:A,offset:L,color:"",fontStyle:0}]);continue}let v,k,M;c.includeExplanation&&(v=r.tokenizeLine(A,_,m),k=v.tokens,M=0);const $=r.tokenizeLine2(A,_,m),ie=$.tokens.length/2;for(let F=0;F<ie;F++){const ae=$.tokens[2*F],ee=F+1<ie?$.tokens[2*F+2]:A.length;if(ae===ee)continue;const ue=$.tokens[2*F+1],Pt=Q(n[j.E9.getForeground(ue)],u),it=j.E9.getFontStyle(ue),an={content:A.substring(ae,ee),offset:L+ae,color:Pt,fontStyle:it};if(c.includeExplanation){const Bn=[];if(c.includeExplanation!=="scopeName")for(const he of t.settings){let He;switch(typeof he.scope){case"string":He=he.scope.split(/,/).map(cn=>cn.trim());break;case"object":He=he.scope;break;default:continue}Bn.push({settings:he,selectors:He.map(cn=>cn.split(/ /))})}an.explanation=[];let Mn=0;for(;ae+Mn<ee;){const he=k[M],He=A.substring(he.startIndex,he.endIndex);Mn+=He.length,an.explanation.push({content:He,scopes:c.includeExplanation==="scopeName"?qn(he.scopes):Vn(Bn,he.scopes)}),M+=1}}R.push(an)}w.push(R),R=[],_=$.ruleStack}return{tokens:w,stateStack:_}}function qn(o){return o.map(r=>({scopeName:r}))}function Vn(o,r){const t=[];for(let n=0,c=r.length;n<c;n++){const u=r[n];t[n]={scopeName:u,themeMatches:Yn(o,u,r.slice(0,n))}}return t}function Sn(o,r){return o===r||r.substring(0,o.length)===o&&r[o.length]==="."}function Kn(o,r,t){if(!Sn(o[o.length-1],r))return!1;let n=o.length-2,c=t.length-1;for(;n>=0&&c>=0;)Sn(o[n],t[c])&&(n-=1),c-=1;return n===-1}function Yn(o,r,t){const n=[];for(const{selectors:c,settings:u}of o)for(const h of c)if(Kn(h,r,t)){n.push(u);break}return n}function rn(o,r,t){const n=Object.entries(t.themes).filter(g=>g[1]).map(g=>({color:g[0],theme:g[1]})),c=n.map(g=>{const _=It(o,r,H(x({},t),{theme:g.theme})),R=y(_),w=typeof g.theme=="string"?g.theme:g.theme.name;return{tokens:_,state:R,theme:w}}),u=Xn(...c.map(g=>g.tokens)),h=u[0].map((g,_)=>g.map((R,w)=>{const S={content:R.content,variants:{},offset:R.offset};return"includeExplanation"in t&&t.includeExplanation&&(S.explanation=R.explanation),u.forEach((E,N)=>{const M=E[_][w],{content:A,explanation:L,offset:v}=M,k=jn(M,["content","explanation","offset"]);S.variants[n[N].color]=k}),S})),m=c[0].state?new d(Object.fromEntries(c.map(g=>{var _;return[g.theme,(_=g.state)==null?void 0:_.getInternalStack(g.theme)]})),c[0].state.lang):void 0;return m&&p(h,m),h}function Xn(...o){const r=o.map(()=>[]),t=o.length;for(let n=0;n<o[0].length;n++){const c=o.map(g=>g[n]),u=r.map(()=>[]);r.forEach((g,_)=>g.push(u[_]));const h=c.map(()=>0),m=c.map(g=>g[0]);for(;m.every(g=>g);){const g=Math.min(...m.map(_=>_.content.length));for(let _=0;_<t;_++){const R=m[_];R.content.length===g?(u[_].push(R),h[_]+=1,m[_]=c[_][h[_]]):(u[_].push(H(x({},R),{content:R.content.slice(0,g)})),m[_]=H(x({},R),{content:R.content.slice(g),offset:R.offset+g}))}}}return r}function nt(o,r,t){let n,c,u,h,m,g;if("themes"in t){const{defaultColor:_="light",cssVariablePrefix:R="--shiki-",colorsRendering:w="css-vars"}=t,S=Object.entries(t.themes).filter(v=>v[1]).map(v=>({color:v[0],theme:v[1]})).sort((v,k)=>v.color===_?-1:k.color===_?1:0);if(S.length===0)throw new B("`themes` option must not be empty");const E=rn(o,r,t);if(g=y(E),_&&te!==_&&!S.find(v=>v.color===_))throw new B(`\`themes\` option must contain the defaultColor key \`${_}\``);const N=S.map(v=>o.getTheme(v.theme)),A=S.map(v=>v.color);u=E.map(v=>v.map(k=>i(k,A,R,_,w))),g&&p(u,g);const L=S.map(v=>pe(v.theme,t));c=Cn(S,N,L,R,_,"fg",w),n=Cn(S,N,L,R,_,"bg",w),h=`shiki-themes ${N.map(v=>v.name).join(" ")}`,m=_?void 0:[c,n].join(";")}else if("theme"in t){const _=pe(t.theme,t);u=It(o,r,t);const R=o.getTheme(t.theme);n=Q(R.bg,_),c=Q(R.fg,_),h=R.name,g=y(u)}else throw new B("Invalid options, either `theme` or `themes` must be provided");return{tokens:u,fg:c,bg:n,themeName:h,rootStyle:m,grammarState:g}}function Cn(o,r,t,n,c,u,h){return o.map((m,g)=>{const _=Q(r[g][u],t[g])||"inherit",R=`${n+m.color}${u==="bg"?"-bg":""}:${_}`;if(g===0&&c){if(c===te&&o.length>1){const w=o.findIndex(A=>A.color==="light"),S=o.findIndex(A=>A.color==="dark");if(w===-1||S===-1)throw new B('When using `defaultColor: "light-dark()"`, you must provide both `light` and `dark` themes');const E=Q(r[w][u],t[w])||"inherit",N=Q(r[S][u],t[S])||"inherit";return`light-dark(${E}, ${N});${R}`}return _}return h==="css-vars"?R:null}).filter(m=>!!m).join(";")}function rt(o,r,t,n={meta:{},options:t,codeToHast:(c,u)=>rt(o,c,u),codeToTokens:(c,u)=>nt(o,c,u)}){var N,A;let c=r;for(const L of J(t))c=((N=L.preprocess)==null?void 0:N.call(n,c,t))||c;let{tokens:u,fg:h,bg:m,themeName:g,rootStyle:_,grammarState:R}=nt(o,c,t);const{mergeWhitespaces:w=!0,mergeSameStyleTokens:S=!1}=t;w===!0?u=Jn(u):w==="never"&&(u=Qn(u)),S&&(u=Zn(u));const E=H(x({},n),{get source(){return c}});for(const L of J(t))u=((A=L.tokens)==null?void 0:A.call(E,u))||u;return Rn(u,H(x({},t),{fg:h,bg:m,themeName:g,rootStyle:_}),E,R)}function Rn(o,r,t,n=y(o)){var N,A,L,v;const c=J(r),u=[],h={type:"root",children:[]},{structure:m="classic",tabindex:g="0"}=r;let _={type:"element",tagName:"pre",properties:x(x({class:`shiki ${r.themeName||""}`,style:r.rootStyle||`background-color:${r.bg};color:${r.fg}`},g!==!1&&g!=null?{tabindex:g.toString()}:{}),Object.fromEntries(Array.from(Object.entries(r.meta||{})).filter(([k])=>!k.startsWith("_")))),children:[]},R={type:"element",tagName:"code",properties:{},children:u};const w=[],S=H(x({},t),{structure:m,addClassToHast:Ze,get source(){return t.source},get tokens(){return o},get options(){return r},get root(){return h},get pre(){return _},get code(){return R},get lines(){return w}});if(o.forEach((k,M)=>{var F,ae;M&&(m==="inline"?h.children.push({type:"element",tagName:"br",properties:{},children:[]}):m==="classic"&&u.push({type:"text",value:`
`}));let $={type:"element",tagName:"span",properties:{class:"line"},children:[]},ie=0;for(const ee of k){let ue={type:"element",tagName:"span",properties:x({},ee.htmlAttrs),children:[{type:"text",value:ee.content}]};const Pt=l(ee.htmlStyle||a(ee));Pt&&(ue.properties.style=Pt);for(const it of c)ue=((F=it==null?void 0:it.span)==null?void 0:F.call(S,ue,M+1,ie,$,ee))||ue;m==="inline"?h.children.push(ue):m==="classic"&&$.children.push(ue),ie+=ee.content.length}if(m==="classic"){for(const ee of c)$=((ae=ee==null?void 0:ee.line)==null?void 0:ae.call(S,$,M+1))||$;w.push($),u.push($)}else m==="inline"&&w.push($)}),m==="classic"){for(const k of c)R=((N=k==null?void 0:k.code)==null?void 0:N.call(S,R))||R;_.children.push(R);for(const k of c)_=((A=k==null?void 0:k.pre)==null?void 0:A.call(S,_))||_;h.children.push(_)}else if(m==="inline"){const k=[];let M={type:"element",tagName:"span",properties:{class:"line"},children:[]};for(const F of h.children)F.type==="element"&&F.tagName==="br"?(k.push(M),M={type:"element",tagName:"span",properties:{class:"line"},children:[]}):(F.type==="element"||F.type==="text")&&M.children.push(F);k.push(M);let ie={type:"element",tagName:"code",properties:{},children:k};for(const F of c)ie=((L=F==null?void 0:F.code)==null?void 0:L.call(S,ie))||ie;h.children=[];for(let F=0;F<ie.children.length;F++){F>0&&h.children.push({type:"element",tagName:"br",properties:{},children:[]});const ae=ie.children[F];ae.type==="element"&&h.children.push(...ae.children)}}let E=h;for(const k of c)E=((v=k==null?void 0:k.root)==null?void 0:v.call(S,E))||E;return n&&p(E,n),E}function Jn(o){return o.map(r=>{const t=[];let n="",c=0;return r.forEach((u,h)=>{const g=!(u.fontStyle&&(u.fontStyle&j.Hd.Underline||u.fontStyle&j.Hd.Strikethrough));g&&u.content.match(/^\s+$/)&&r[h+1]?(c||(c=u.offset),n+=u.content):n?(g?t.push(H(x({},u),{offset:c,content:n+u.content})):t.push({content:n,offset:c},u),c=0,n=""):t.push(u)}),t})}function Qn(o){return o.map(r=>r.flatMap(t=>{if(t.content.match(/^\s+$/))return t;const n=t.content.match(/^(\s*)(.*?)(\s*)$/);if(!n)return t;const[,c,u,h]=n;if(!c&&!h)return t;const m=[H(x({},t),{offset:t.offset+c.length,content:u})];return c&&m.unshift({content:c,offset:t.offset}),h&&m.push({content:h,offset:t.offset+c.length+u.length}),m}))}function Zn(o){return o.map(r=>{const t=[];for(const n of r){if(t.length===0){t.push(x({},n));continue}const c=t[t.length-1],u=l(c.htmlStyle||a(c)),h=l(n.htmlStyle||a(n)),m=c.fontStyle&&(c.fontStyle&j.Hd.Underline||c.fontStyle&j.Hd.Strikethrough),g=n.fontStyle&&(n.fontStyle&j.Hd.Underline||n.fontStyle&j.Hd.Strikethrough);!m&&!g&&u===h?c.content+=n.content:t.push(x({},n))}return t})}const wn=Te;function kn(o,r,t){var u;const n={meta:{},options:t,codeToHast:(h,m)=>rt(o,h,m),codeToTokens:(h,m)=>nt(o,h,m)};let c=wn(rt(o,r,t,n));for(const h of J(t))c=((u=h.postprocess)==null?void 0:u.call(n,c,t))||c;return c}const Nn={light:"#333333",dark:"#bbbbbb"},Tn={light:"#fffffe",dark:"#1e1e1e"},En="__shiki_resolved";function vt(o){var m,g,_,R,w;if(o!=null&&o[En])return o;const r=x({},o);r.tokenColors&&!r.settings&&(r.settings=r.tokenColors,delete r.tokenColors),r.type||(r.type="dark"),r.colorReplacements=x({},r.colorReplacements),r.settings||(r.settings=[]);let{bg:t,fg:n}=r;if(!t||!n){const S=r.settings?r.settings.find(E=>!E.name&&!E.scope):void 0;(m=S==null?void 0:S.settings)!=null&&m.foreground&&(n=S.settings.foreground),(g=S==null?void 0:S.settings)!=null&&g.background&&(t=S.settings.background),!n&&((_=r==null?void 0:r.colors)!=null&&_["editor.foreground"])&&(n=r.colors["editor.foreground"]),!t&&((R=r==null?void 0:r.colors)!=null&&R["editor.background"])&&(t=r.colors["editor.background"]),n||(n=r.type==="light"?Nn.light:Nn.dark),t||(t=r.type==="light"?Tn.light:Tn.dark),r.fg=n,r.bg=t}r.settings[0]&&r.settings[0].settings&&!r.settings[0].scope||r.settings.unshift({settings:{foreground:r.fg,background:r.bg}});let c=0;const u=new Map;function h(S){var N;if(u.has(S))return u.get(S);c+=1;const E=`#${c.toString(16).padStart(8,"0").toLowerCase()}`;return(N=r.colorReplacements)!=null&&N[`#${E}`]?h(S):(u.set(S,E),E)}r.settings=r.settings.map(S=>{var L,v;const E=((L=S.settings)==null?void 0:L.foreground)&&!S.settings.foreground.startsWith("#"),N=((v=S.settings)==null?void 0:v.background)&&!S.settings.background.startsWith("#");if(!E&&!N)return S;const A=H(x({},S),{settings:x({},S.settings)});if(E){const k=h(S.settings.foreground);r.colorReplacements[k]=S.settings.foreground,A.settings.foreground=k}if(N){const k=h(S.settings.background);r.colorReplacements[k]=S.settings.background,A.settings.background=k}return A});for(const S of Object.keys(r.colors||{}))if((S==="editor.foreground"||S==="editor.background"||S.startsWith("terminal.ansi"))&&!((w=r.colors[S])!=null&&w.startsWith("#"))){const E=h(r.colors[S]);r.colorReplacements[E]=r.colors[S],r.colors[S]=E}return Object.defineProperty(r,En,{enumerable:!1,writable:!1,value:!0}),r}function In(o){return V(this,null,function*(){return Array.from(new Set((yield Promise.all(o.filter(r=>!le(r)).map(r=>V(this,null,function*(){return yield Je(r).then(t=>Array.isArray(t)?t:[t])})))).flat()))})}function An(o){return V(this,null,function*(){return(yield Promise.all(o.map(t=>V(this,null,function*(){return Qe(t)?null:vt(yield Je(t))})))).filter(t=>!!t)})}let Ot=3,vn=!1;function er(o=!0,r=!1){Ot=o,vn=r}function On(o,r=3){if(Ot&&!(typeof Ot=="number"&&r>Ot)){if(vn)throw new Error(`[SHIKI DEPRECATE]: ${o}`);console.trace(`[SHIKI DEPRECATE]: ${o}`)}}class De extends Error{constructor(r){super(r),this.name="ShikiError"}}class tr extends j.Bz{constructor(t,n,c,u={}){super(t);b(this,"_resolvedThemes",new Map);b(this,"_resolvedGrammars",new Map);b(this,"_langMap",new Map);b(this,"_langGraph",new Map);b(this,"_textmateThemeCache",new WeakMap);b(this,"_loadedThemesCache",null);b(this,"_loadedLanguagesCache",null);this._resolver=t,this._themes=n,this._langs=c,this._alias=u,this._themes.map(h=>this.loadTheme(h)),this.loadLanguages(this._langs)}getTheme(t){return typeof t=="string"?this._resolvedThemes.get(t):this.loadTheme(t)}loadTheme(t){const n=vt(t);return n.name&&(this._resolvedThemes.set(n.name,n),this._loadedThemesCache=null),n}getLoadedThemes(){return this._loadedThemesCache||(this._loadedThemesCache=[...this._resolvedThemes.keys()]),this._loadedThemesCache}setTheme(t){let n=this._textmateThemeCache.get(t);n||(n=j.Q2.createFromRawTheme(t),this._textmateThemeCache.set(t,n)),this._syncRegistry.setTheme(n)}getGrammar(t){if(this._alias[t]){const n=new Set([t]);for(;this._alias[t];){if(t=this._alias[t],n.has(t))throw new De(`Circular alias \`${Array.from(n).join(" -> ")} -> ${t}\``);n.add(t)}}return this._resolvedGrammars.get(t)}loadLanguage(t){var h,m,g,_;if(this.getGrammar(t.name))return;const n=new Set([...this._langMap.values()].filter(R=>{var w;return(w=R.embeddedLangsLazy)==null?void 0:w.includes(t.name)}));this._resolver.addLanguage(t);const c={balancedBracketSelectors:t.balancedBracketSelectors||["*"],unbalancedBracketSelectors:t.unbalancedBracketSelectors||[]};this._syncRegistry._rawGrammars.set(t.scopeName,t);const u=this.loadGrammarWithConfiguration(t.scopeName,1,c);if(u.name=t.name,this._resolvedGrammars.set(t.name,u),t.aliases&&t.aliases.forEach(R=>{this._alias[R]=t.name}),this._loadedLanguagesCache=null,n.size)for(const R of n)this._resolvedGrammars.delete(R.name),this._loadedLanguagesCache=null,(m=(h=this._syncRegistry)==null?void 0:h._injectionGrammars)==null||m.delete(R.scopeName),(_=(g=this._syncRegistry)==null?void 0:g._grammars)==null||_.delete(R.scopeName),this.loadLanguage(this._langMap.get(R.name))}dispose(){super.dispose(),this._resolvedThemes.clear(),this._resolvedGrammars.clear(),this._langMap.clear(),this._langGraph.clear(),this._loadedThemesCache=null}loadLanguages(t){for(const u of t)this.resolveEmbeddedLanguages(u);const n=Array.from(this._langGraph.entries()),c=n.filter(([u,h])=>!h);if(c.length){const u=n.filter(([h,m])=>{var g;return m&&((g=m.embeddedLangs)==null?void 0:g.some(_=>c.map(([R])=>R).includes(_)))}).filter(h=>!c.includes(h));throw new De(`Missing languages ${c.map(([h])=>`\`${h}\``).join(", ")}, required by ${u.map(([h])=>`\`${h}\``).join(", ")}`)}for(const[u,h]of n)this._resolver.addLanguage(h);for(const[u,h]of n)this.loadLanguage(h)}getLoadedLanguages(){return this._loadedLanguagesCache||(this._loadedLanguagesCache=[...new Set([...this._resolvedGrammars.keys(),...Object.keys(this._alias)])]),this._loadedLanguagesCache}resolveEmbeddedLanguages(t){var c;this._langMap.set(t.name,t),this._langGraph.set(t.name,t);const n=(c=t.embeddedLanguages)!=null?c:t.embeddedLangs;if(n)for(const u of n)this._langGraph.set(u,this._langMap.get(u))}}class nr{constructor(r,t){b(this,"_langs",new Map);b(this,"_scopeToLang",new Map);b(this,"_injections",new Map);b(this,"_onigLib");this._onigLib={createOnigScanner:n=>r.createScanner(n),createOnigString:n=>r.createString(n)},t.forEach(n=>this.addLanguage(n))}get onigLib(){return this._onigLib}getLangRegistration(r){return this._langs.get(r)}loadGrammar(r){return this._scopeToLang.get(r)}addLanguage(r){this._langs.set(r.name,r),r.aliases&&r.aliases.forEach(t=>{this._langs.set(t,r)}),this._scopeToLang.set(r.scopeName,r),r.injectTo&&r.injectTo.forEach(t=>{this._injections.get(t)||this._injections.set(t,[]),this._injections.get(t).push(r.scopeName)})}getInjections(r){const t=r.split(".");let n=[];for(let c=1;c<=t.length;c++){const u=t.slice(0,c).join(".");n=[...n,...this._injections.get(u)||[]]}return n}}let st=0;function sn(o){st+=1,o.warnings!==!1&&st>=10&&st%10===0&&console.warn(`[Shiki] ${st} instances have been created. Shiki is supposed to be used as a singleton, consider refactoring your code to cache your highlighter instance; Or call \`highlighter.dispose()\` to release unused instances.`);let r=!1;if(!o.engine)throw new De("`engine` option is required for synchronous mode");const t=(o.langs||[]).flat(1),n=(o.themes||[]).flat(1).map(vt),c=new nr(o.engine,t),u=new tr(c,n,t,o.langAlias);let h;function m(k){L();const M=u.getGrammar(typeof k=="string"?k:k.name);if(!M)throw new De(`Language \`${k}\` not found, you may need to load it first`);return M}function g(k){if(k==="none")return{bg:"",fg:"",name:"none",settings:[],type:"dark"};L();const M=u.getTheme(k);if(!M)throw new De(`Theme \`${k}\` not found, you may need to load it first`);return M}function _(k){L();const M=g(k);h!==k&&(u.setTheme(M),h=k);const $=u.getColorMap();return{theme:M,colorMap:$}}function R(){return L(),u.getLoadedThemes()}function w(){return L(),u.getLoadedLanguages()}function S(...k){L(),u.loadLanguages(k.flat(1))}function E(...k){return V(this,null,function*(){return S(yield In(k))})}function N(...k){L();for(const M of k.flat(1))u.loadTheme(M)}function A(...k){return V(this,null,function*(){return L(),N(yield An(k))})}function L(){if(r)throw new De("Shiki instance has been disposed")}function v(){r||(r=!0,u.dispose(),st-=1)}return{setTheme:_,getTheme:g,getLanguage:m,getLoadedThemes:R,getLoadedLanguages:w,loadLanguage:E,loadLanguageSync:S,loadTheme:A,loadThemeSync:N,dispose:v,[Symbol.dispose]:v}}function Pn(o){return V(this,null,function*(){o.engine||On("`engine` option is required. Use `createOnigurumaEngine` or `createJavaScriptRegexEngine` to create an engine.");const[r,t,n]=yield Promise.all([An(o.themes||[]),In(o.langs||[]),o.engine]);return sn(H(x({},o),{themes:r,langs:t,engine:n}))})}function on(o){return V(this,null,function*(){const r=yield Pn(o);return H(x({getLastGrammarState:(...t)=>yn(r,...t),codeToTokensBase:(t,n)=>It(r,t,n),codeToTokensWithThemes:(t,n)=>rn(r,t,n),codeToTokens:(t,n)=>nt(r,t,n),codeToHast:(t,n)=>rt(r,t,n),codeToHtml:(t,n)=>kn(r,t,n),getBundledLanguages:()=>({}),getBundledThemes:()=>({})},r),{getInternalContext:()=>r})})}function rr(o){const r=sn(o);return H(x({getLastGrammarState:(...t)=>yn(r,...t),codeToTokensBase:(t,n)=>It(r,t,n),codeToTokensWithThemes:(t,n)=>rn(r,t,n),codeToTokens:(t,n)=>nt(r,t,n),codeToHast:(t,n)=>rt(r,t,n),codeToHtml:(t,n)=>kn(r,t,n),getBundledLanguages:()=>({}),getBundledThemes:()=>({})},r),{getInternalContext:()=>r})}function xn(o){let r;function t(n){return V(this,null,function*(){if(r){const c=yield r;return yield Promise.all([c.loadTheme(...n.themes||[]),c.loadLanguage(...n.langs||[])]),c}else return r=o(H(x({},n),{themes:n.themes||[],langs:n.langs||[]})),r})}return t}const sr=xn(on);function Ln(o){const r=o.langs,t=o.themes,n=o.engine;function c(u){return V(this,null,function*(){var w,S,E;function h(N){var A;if(typeof N=="string"){if(le(N))return[];N=((A=u.langAlias)==null?void 0:A[N])||N;const L=r[N];if(!L)throw new B(`Language \`${N}\` is not included in this bundle. You may want to load it from external source.`);return L}return N}function m(N){if(Qe(N))return"none";if(typeof N=="string"){const A=t[N];if(!A)throw new B(`Theme \`${N}\` is not included in this bundle. You may want to load it from external source.`);return A}return N}const g=((w=u.themes)!=null?w:[]).map(N=>m(N)),_=((S=u.langs)!=null?S:[]).map(N=>h(N)),R=yield on(H(x({engine:(E=u.engine)!=null?E:n()},u),{themes:g,langs:_}));return H(x({},R),{loadLanguage(...N){return R.loadLanguage(...N.map(h))},loadTheme(...N){return R.loadTheme(...N.map(m))},getBundledLanguages(){return r},getBundledThemes(){return t}})})}return c}function Gn(o){let r;function t(){return V(this,arguments,function*(n={}){if(r){const c=yield r;return yield Promise.all([c.loadTheme(...n.themes||[]),c.loadLanguage(...n.langs||[])]),c}else{r=o(H(x({},n),{themes:[],langs:[]}));const c=yield r;return yield Promise.all([c.loadTheme(...n.themes||[]),c.loadLanguage(...n.langs||[])]),c}})}return t}function ir(o,r){const t=Gn(o);function n(u,h){return V(this,null,function*(){var _;const m=yield t({langs:[h.lang],themes:"theme"in h?[h.theme]:Object.values(h.themes)}),g=yield(_=r==null?void 0:r.guessEmbeddedLanguages)==null?void 0:_.call(r,u,h.lang,m);return g&&(yield m.loadLanguage(...g)),m})}return{getSingletonHighlighter(u){return t(u)},codeToHtml(u,h){return V(this,null,function*(){return(yield n(u,h)).codeToHtml(u,h)})},codeToHast(u,h){return V(this,null,function*(){return(yield n(u,h)).codeToHast(u,h)})},codeToTokens(u,h){return V(this,null,function*(){return(yield n(u,h)).codeToTokens(u,h)})},codeToTokensBase(u,h){return V(this,null,function*(){return(yield n(u,h)).codeToTokensBase(u,h)})},codeToTokensWithThemes(u,h){return V(this,null,function*(){return(yield n(u,h)).codeToTokensWithThemes(u,h)})},getLastGrammarState(u,h){return V(this,null,function*(){return(yield t({langs:[h.lang],themes:[h.theme]})).getLastGrammarState(u,h)})}}}const or=Ln;function ar(o={}){var h;const{name:r="css-variables",variablePrefix:t="--shiki-",fontStyle:n=!0}=o,c=m=>{var g;return(g=o.variableDefaults)!=null&&g[m]?`var(${t}${m}, ${o.variableDefaults[m]})`:`var(${t}${m})`},u={name:r,type:"dark",colors:{"editor.foreground":c("foreground"),"editor.background":c("background"),"terminal.ansiBlack":c("ansi-black"),"terminal.ansiRed":c("ansi-red"),"terminal.ansiGreen":c("ansi-green"),"terminal.ansiYellow":c("ansi-yellow"),"terminal.ansiBlue":c("ansi-blue"),"terminal.ansiMagenta":c("ansi-magenta"),"terminal.ansiCyan":c("ansi-cyan"),"terminal.ansiWhite":c("ansi-white"),"terminal.ansiBrightBlack":c("ansi-bright-black"),"terminal.ansiBrightRed":c("ansi-bright-red"),"terminal.ansiBrightGreen":c("ansi-bright-green"),"terminal.ansiBrightYellow":c("ansi-bright-yellow"),"terminal.ansiBrightBlue":c("ansi-bright-blue"),"terminal.ansiBrightMagenta":c("ansi-bright-magenta"),"terminal.ansiBrightCyan":c("ansi-bright-cyan"),"terminal.ansiBrightWhite":c("ansi-bright-white")},tokenColors:[{scope:["keyword.operator.accessor","meta.group.braces.round.function.arguments","meta.template.expression","markup.fenced_code meta.embedded.block"],settings:{foreground:c("foreground")}},{scope:"emphasis",settings:{fontStyle:"italic"}},{scope:["strong","markup.heading.markdown","markup.bold.markdown"],settings:{fontStyle:"bold"}},{scope:["markup.italic.markdown"],settings:{fontStyle:"italic"}},{scope:"meta.link.inline.markdown",settings:{fontStyle:"underline",foreground:c("token-link")}},{scope:["string","markup.fenced_code","markup.inline"],settings:{foreground:c("token-string")}},{scope:["comment","string.quoted.docstring.multi"],settings:{foreground:c("token-comment")}},{scope:["constant.numeric","constant.language","constant.other.placeholder","constant.character.format.placeholder","variable.language.this","variable.other.object","variable.other.class","variable.other.constant","meta.property-name","meta.property-value","support"],settings:{foreground:c("token-constant")}},{scope:["keyword","storage.modifier","storage.type","storage.control.clojure","entity.name.function.clojure","entity.name.tag.yaml","support.function.node","support.type.property-name.json","punctuation.separator.key-value","punctuation.definition.template-expression"],settings:{foreground:c("token-keyword")}},{scope:"variable.parameter.function",settings:{foreground:c("token-parameter")}},{scope:["support.function","entity.name.type","entity.other.inherited-class","meta.function-call","meta.instance.constructor","entity.other.attribute-name","entity.name.function","constant.keyword.clojure"],settings:{foreground:c("token-function")}},{scope:["entity.name.tag","string.quoted","string.regexp","string.interpolated","string.template","string.unquoted.plain.out.yaml","keyword.other.template"],settings:{foreground:c("token-string-expression")}},{scope:["punctuation.definition.arguments","punctuation.definition.dict","punctuation.separator","meta.function-call.arguments"],settings:{foreground:c("token-punctuation")}},{scope:["markup.underline.link","punctuation.definition.metadata.markdown"],settings:{foreground:c("token-link")}},{scope:["beginning.punctuation.definition.list.markdown"],settings:{foreground:c("token-string")}},{scope:["punctuation.definition.string.begin.markdown","punctuation.definition.string.end.markdown","string.other.link.title.markdown","string.other.link.description.markdown"],settings:{foreground:c("token-keyword")}},{scope:["markup.inserted","meta.diff.header.to-file","punctuation.definition.inserted"],settings:{foreground:c("token-inserted")}},{scope:["markup.deleted","meta.diff.header.from-file","punctuation.definition.deleted"],settings:{foreground:c("token-deleted")}},{scope:["markup.changed","punctuation.definition.changed"],settings:{foreground:c("token-changed")}}]};return n||(u.tokenColors=(h=u.tokenColors)==null?void 0:h.map(m=>{var g;return(g=m.settings)!=null&&g.fontStyle&&delete m.settings.fontStyle,m})),u}},46185:function(W,U,G){var te,Z;G.d(U,{Bz:function(){return Et},E9:function(){return Le},Hd:function(){return Pe},Q2:function(){return ve},_X:function(){return nn}});var B=G(14224);function j(s){return ye(s)}function ye(s){return Array.isArray(s)?be(s):s instanceof RegExp?s:typeof s=="object"?Se(s):s}function be(s){let e=[];for(let i=0,a=s.length;i<a;i++)e[i]=ye(s[i]);return e}function Se(s){let e={};for(let i in s)e[i]=ye(s[i]);return e}function ne(s,...e){return e.forEach(i=>{for(let a in i)s[a]=i[a]}),s}function fe(s){const e=~s.lastIndexOf("/")||~s.lastIndexOf("\\");return e===0?s:~e===s.length-1?fe(s.substring(0,s.length-1)):s.substr(~e+1)}var je=/\$(\d+)|\${(\d+):\/(downcase|upcase)}/g,Ae=class{static hasCaptures(s){return s===null?!1:(je.lastIndex=0,je.test(s))}static replaceCaptures(s,e,i){return s.replace(je,(a,l,f,p)=>{let y=i[parseInt(l||f,10)];if(y){let d=e.substring(y.start,y.end);for(;d[0]===".";)d=d.substring(1);switch(p){case"downcase":return d.toLowerCase();case"upcase":return d.toUpperCase();default:return d}}else return a})}};function $e(s,e){return s<e?-1:s>e?1:0}function ot(s,e){if(s===null&&e===null)return 0;if(!s)return-1;if(!e)return 1;let i=s.length,a=e.length;if(i===a){for(let l=0;l<i;l++){let f=$e(s[l],e[l]);if(f!==0)return f}return 0}return i-a}function at(s){return!!(/^#[0-9a-f]{6}$/i.test(s)||/^#[0-9a-f]{8}$/i.test(s)||/^#[0-9a-f]{3}$/i.test(s)||/^#[0-9a-f]{4}$/i.test(s))}function ct(s){return s.replace(/[\-\\\{\}\*\+\?\|\^\$\.\,\[\]\(\)\#\s]/g,"\\$&")}var lt=class{constructor(s){b(this,"cache",new Map);this.fn=s}get(s){if(this.cache.has(s))return this.cache.get(s);const e=this.fn(s);return this.cache.set(s,e),e}},ve=class{constructor(s,e,i){b(this,"_cachedMatchRoot",new lt(s=>this._root.match(s)));this._colorMap=s,this._defaults=e,this._root=i}static createFromRawTheme(s,e){return this.createFromParsedTheme(Mt(s),e)}static createFromParsedTheme(s,e){return xe(s,e)}getColorMap(){return this._colorMap.getColorMap()}getDefaults(){return this._defaults}match(s){if(s===null)return this._defaults;const e=s.scopeName,a=this._cachedMatchRoot.get(e).find(l=>Gt(s.parent,l.parentScopes));return a?new Oe(a.fontStyle,a.foreground,a.background):null}},Ue=class Lt{constructor(e,i){this.parent=e,this.scopeName=i}static push(e,i){for(const a of i)e=new Lt(e,a);return e}static from(...e){let i=null;for(let a=0;a<e.length;a++)i=new Lt(i,e[a]);return i}push(e){return new Lt(this,e)}getSegments(){let e=this;const i=[];for(;e;)i.push(e.scopeName),e=e.parent;return i.reverse(),i}toString(){return this.getSegments().join(" ")}extends(e){return this===e?!0:this.parent===null?!1:this.parent.extends(e)}getExtensionIfDefined(e){const i=[];let a=this;for(;a&&a!==e;)i.push(a.scopeName),a=a.parent;return a===e?i.reverse():void 0}};function Gt(s,e){if(e.length===0)return!0;for(let i=0;i<e.length;i++){let a=e[i],l=!1;if(a===">"){if(i===e.length-1)return!1;a=e[++i],l=!0}for(;s&&!Bt(s.scopeName,a);){if(l)return!1;s=s.parent}if(!s)return!1;s=s.parent}return!0}function Bt(s,e){return e===s||s.startsWith(e)&&s[e.length]==="."}var Oe=class{constructor(s,e,i){this.fontStyle=s,this.foregroundId=e,this.backgroundId=i}};function Mt(s){if(!s)return[];if(!s.settings||!Array.isArray(s.settings))return[];let e=s.settings,i=[],a=0;for(let l=0,f=e.length;l<f;l++){let p=e[l];if(!p.settings)continue;let y;if(typeof p.scope=="string"){let I=p.scope;I=I.replace(/^[,]+/,""),I=I.replace(/[,]+$/,""),y=I.split(",")}else Array.isArray(p.scope)?y=p.scope:y=[""];let d=-1;if(typeof p.settings.fontStyle=="string"){d=0;let I=p.settings.fontStyle.split(" ");for(let D=0,O=I.length;D<O;D++)switch(I[D]){case"italic":d=d|1;break;case"bold":d=d|2;break;case"underline":d=d|4;break;case"strikethrough":d=d|8;break}}let C=null;typeof p.settings.foreground=="string"&&at(p.settings.foreground)&&(C=p.settings.foreground);let T=null;typeof p.settings.background=="string"&&at(p.settings.background)&&(T=p.settings.background);for(let I=0,D=y.length;I<D;I++){let P=y[I].trim().split(" "),J=P[P.length-1],K=null;P.length>1&&(K=P.slice(0,P.length-1),K.reverse()),i[a++]=new ut(J,K,l,d,C,T)}}return i}var ut=class{constructor(s,e,i,a,l,f){this.scope=s,this.parentScopes=e,this.index=i,this.fontStyle=a,this.foreground=l,this.background=f}},Pe=(s=>(s[s.NotSet=-1]="NotSet",s[s.None=0]="None",s[s.Italic=1]="Italic",s[s.Bold=2]="Bold",s[s.Underline=4]="Underline",s[s.Strikethrough=8]="Strikethrough",s))(Pe||{});function xe(s,e){s.sort((d,C)=>{let T=$e(d.scope,C.scope);return T!==0||(T=ot(d.parentScopes,C.parentScopes),T!==0)?T:d.index-C.index});let i=0,a="#000000",l="#ffffff";for(;s.length>=1&&s[0].scope==="";){let d=s.shift();d.fontStyle!==-1&&(i=d.fontStyle),d.foreground!==null&&(a=d.foreground),d.background!==null&&(l=d.background)}let f=new Dt(e),p=new Oe(i,f.getId(a),f.getId(l)),y=new de(new Fe(0,null,-1,0,0),[]);for(let d=0,C=s.length;d<C;d++){let T=s[d];y.insert(0,T.scope,T.parentScopes,T.fontStyle,f.getId(T.foreground),f.getId(T.background))}return new ve(f,p,y)}var Dt=class{constructor(s){b(this,"_isFrozen");b(this,"_lastColorId");b(this,"_id2color");b(this,"_color2id");if(this._lastColorId=0,this._id2color=[],this._color2id=Object.create(null),Array.isArray(s)){this._isFrozen=!0;for(let e=0,i=s.length;e<i;e++)this._color2id[s[e]]=e,this._id2color[e]=s[e]}else this._isFrozen=!1}getId(s){if(s===null)return 0;s=s.toUpperCase();let e=this._color2id[s];if(e)return e;if(this._isFrozen)throw new Error(`Missing color in color map - ${s}`);return e=++this._lastColorId,this._color2id[s]=e,this._id2color[e]=s,e}getColorMap(){return this._id2color.slice(0)}},Ht=Object.freeze([]),Fe=class $n{constructor(e,i,a,l,f){b(this,"scopeDepth");b(this,"parentScopes");b(this,"fontStyle");b(this,"foreground");b(this,"background");this.scopeDepth=e,this.parentScopes=i||Ht,this.fontStyle=a,this.foreground=l,this.background=f}clone(){return new $n(this.scopeDepth,this.parentScopes,this.fontStyle,this.foreground,this.background)}static cloneArr(e){let i=[];for(let a=0,l=e.length;a<l;a++)i[a]=e[a].clone();return i}acceptOverwrite(e,i,a,l){this.scopeDepth>e?console.log("how did this happen?"):this.scopeDepth=e,i!==-1&&(this.fontStyle=i),a!==0&&(this.foreground=a),l!==0&&(this.background=l)}},de=class un{constructor(e,i=[],a={}){b(this,"_rulesWithParentScopes");this._mainRule=e,this._children=a,this._rulesWithParentScopes=i}static _cmpBySpecificity(e,i){if(e.scopeDepth!==i.scopeDepth)return i.scopeDepth-e.scopeDepth;let a=0,l=0;for(;e.parentScopes[a]===">"&&a++,i.parentScopes[l]===">"&&l++,!(a>=e.parentScopes.length||l>=i.parentScopes.length);){const f=i.parentScopes[l].length-e.parentScopes[a].length;if(f!==0)return f;a++,l++}return i.parentScopes.length-e.parentScopes.length}match(e){if(e!==""){let a=e.indexOf("."),l,f;if(a===-1?(l=e,f=""):(l=e.substring(0,a),f=e.substring(a+1)),this._children.hasOwnProperty(l))return this._children[l].match(f)}const i=this._rulesWithParentScopes.concat(this._mainRule);return i.sort(un._cmpBySpecificity),i}insert(e,i,a,l,f,p){if(i===""){this._doInsertHere(e,a,l,f,p);return}let y=i.indexOf("."),d,C;y===-1?(d=i,C=""):(d=i.substring(0,y),C=i.substring(y+1));let T;this._children.hasOwnProperty(d)?T=this._children[d]:(T=new un(this._mainRule.clone(),Fe.cloneArr(this._rulesWithParentScopes)),this._children[d]=T),T.insert(e+1,C,a,l,f,p)}_doInsertHere(e,i,a,l,f){if(i===null){this._mainRule.acceptOverwrite(e,a,l,f);return}for(let p=0,y=this._rulesWithParentScopes.length;p<y;p++){let d=this._rulesWithParentScopes[p];if(ot(d.parentScopes,i)===0){d.acceptOverwrite(e,a,l,f);return}}a===-1&&(a=this._mainRule.fontStyle),l===0&&(l=this._mainRule.foreground),f===0&&(f=this._mainRule.background),this._rulesWithParentScopes.push(new Fe(e,i,a,l,f))}},Le=class se{static toBinaryStr(e){return e.toString(2).padStart(32,"0")}static print(e){const i=se.getLanguageId(e),a=se.getTokenType(e),l=se.getFontStyle(e),f=se.getForeground(e),p=se.getBackground(e);console.log({languageId:i,tokenType:a,fontStyle:l,foreground:f,background:p})}static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static set(e,i,a,l,f,p,y){let d=se.getLanguageId(e),C=se.getTokenType(e),T=se.containsBalancedBrackets(e)?1:0,I=se.getFontStyle(e),D=se.getForeground(e),O=se.getBackground(e);return i!==0&&(d=i),a!==8&&(C=a),l!==null&&(T=l?1:0),f!==-1&&(I=f),p!==0&&(D=p),y!==0&&(O=y),(d<<0|C<<8|T<<10|I<<11|D<<15|O<<24)>>>0}};function hn(s){return s}function fn(s){return s}function Ge(s,e){const i=[],a=jt(s);let l=a.next();for(;l!==null;){let d=0;if(l.length===2&&l.charAt(1)===":"){switch(l.charAt(0)){case"R":d=1;break;case"L":d=-1;break;default:console.log(`Unknown priority ${l} in scope selector`)}l=a.next()}let C=p();if(i.push({matcher:C,priority:d}),l!==",")break;l=a.next()}return i;function f(){if(l==="-"){l=a.next();const d=f();return C=>!!d&&!d(C)}if(l==="("){l=a.next();const d=y();return l===")"&&(l=a.next()),d}if(ht(l)){const d=[];do d.push(l),l=a.next();while(ht(l));return C=>e(d,C)}return null}function p(){const d=[];let C=f();for(;C;)d.push(C),C=f();return T=>d.every(I=>I(T))}function y(){const d=[];let C=p();for(;C&&(d.push(C),l==="|"||l===",");){do l=a.next();while(l==="|"||l===",");C=p()}return T=>d.some(I=>I(T))}}function ht(s){return!!s&&!!s.match(/[\w\.:]+/)}function jt(s){let e=/([LR]:|[\w\.:][\w\.:\-]*|[\,\|\-\(\)])/g,i=e.exec(s);return{next:()=>{if(!i)return null;const a=i[0];return i=e.exec(s),a}}}var ft=(s=>(s[s.None=0]="None",s[s.NotBeginString=1]="NotBeginString",s[s.NotEndString=2]="NotEndString",s[s.NotBeginPosition=4]="NotBeginPosition",s[s.DebugCall=8]="DebugCall",s))(ft||{});function dt(s){typeof s.dispose=="function"&&s.dispose()}var Ce=class{constructor(s){this.scopeName=s}toKey(){return this.scopeName}},$t=class{constructor(s,e){this.scopeName=s,this.ruleName=e}toKey(){return`${this.scopeName}#${this.ruleName}`}},We=class{constructor(){b(this,"_references",[]);b(this,"_seenReferenceKeys",new Set);b(this,"visitedRule",new Set)}get references(){return this._references}add(s){const e=s.toKey();this._seenReferenceKeys.has(e)||(this._seenReferenceKeys.add(e),this._references.push(s))}},z=class{constructor(s,e){b(this,"seenFullScopeRequests",new Set);b(this,"seenPartialScopeRequests",new Set);b(this,"Q");this.repo=s,this.initialScopeName=e,this.seenFullScopeRequests.add(this.initialScopeName),this.Q=[new Ce(this.initialScopeName)]}processQueue(){const s=this.Q;this.Q=[];const e=new We;for(const i of s)mt(i,this.initialScopeName,this.repo,e);for(const i of e.references)if(i instanceof Ce){if(this.seenFullScopeRequests.has(i.scopeName))continue;this.seenFullScopeRequests.add(i.scopeName),this.Q.push(i)}else{if(this.seenFullScopeRequests.has(i.scopeName)||this.seenPartialScopeRequests.has(i.toKey()))continue;this.seenPartialScopeRequests.add(i.toKey()),this.Q.push(i)}}};function mt(s,e,i,a){const l=i.lookup(s.scopeName);if(!l){if(s.scopeName===e)throw new Error(`No grammar provided for <${e}>`);return}const f=i.lookup(e);s instanceof Ce?Re({baseGrammar:f,selfGrammar:l},a):ze(s.ruleName,{baseGrammar:f,selfGrammar:l,repository:l.repository},a);const p=i.injections(s.scopeName);if(p)for(const y of p)a.add(new Ce(y))}function ze(s,e,i){if(e.repository&&e.repository[s]){const a=e.repository[s];Be([a],e,i)}}function Re(s,e){s.selfGrammar.patterns&&Array.isArray(s.selfGrammar.patterns)&&Be(s.selfGrammar.patterns,H(x({},s),{repository:s.selfGrammar.repository}),e),s.selfGrammar.injections&&Be(Object.values(s.selfGrammar.injections),H(x({},s),{repository:s.selfGrammar.repository}),e)}function Be(s,e,i){for(const a of s){if(i.visitedRule.has(a))continue;i.visitedRule.add(a);const l=a.repository?ne({},e.repository,a.repository):e.repository;Array.isArray(a.patterns)&&Be(a.patterns,H(x({},e),{repository:l}),i);const f=a.include;if(!f)continue;const p=gt(f);switch(p.kind){case 0:Re(H(x({},e),{selfGrammar:e.baseGrammar}),i);break;case 1:Re(e,i);break;case 2:ze(p.ruleName,H(x({},e),{repository:l}),i);break;case 3:case 4:const y=p.scopeName===e.selfGrammar.scopeName?e.selfGrammar:p.scopeName===e.baseGrammar.scopeName?e.baseGrammar:void 0;if(y){const d={baseGrammar:e.baseGrammar,selfGrammar:y,repository:l};p.kind===4?ze(p.ruleName,d,i):Re(d,i)}else p.kind===4?i.add(new $t(p.scopeName,p.ruleName)):i.add(new Ce(p.scopeName));break}}}var pt=class{constructor(){b(this,"kind",0)}},qe=class{constructor(){b(this,"kind",1)}},Ve=class{constructor(s){b(this,"kind",2);this.ruleName=s}},Ut=class{constructor(s){b(this,"kind",3);this.scopeName=s}},Ft=class{constructor(s,e){b(this,"kind",4);this.scopeName=s,this.ruleName=e}};function gt(s){if(s==="$base")return new pt;if(s==="$self")return new qe;const e=s.indexOf("#");if(e===-1)return new Ut(s);if(e===0)return new Ve(s.substring(1));{const i=s.substring(0,e),a=s.substring(e+1);return new Ft(i,a)}}var Wt=/\\(\d+)/,_t=/\\(\d+)/g,dn=Symbol("RuleId"),yt=-1,bt=-2;function mn(s){return s}function pn(s){return s}var we=class{constructor(s,e,i,a){b(this,"$location");b(this,"id");b(this,"_nameIsCapturing");b(this,"_name");b(this,"_contentNameIsCapturing");b(this,"_contentName");this.$location=s,this.id=e,this._name=i||null,this._nameIsCapturing=Ae.hasCaptures(this._name),this._contentName=a||null,this._contentNameIsCapturing=Ae.hasCaptures(this._contentName)}get debugName(){const s=this.$location?`${fe(this.$location.filename)}:${this.$location.line}`:"unknown";return`${this.constructor.name}#${this.id} @ ${s}`}getName(s,e){return!this._nameIsCapturing||this._name===null||s===null||e===null?this._name:Ae.replaceCaptures(this._name,s,e)}getContentName(s,e){return!this._contentNameIsCapturing||this._contentName===null?this._contentName:Ae.replaceCaptures(this._contentName,s,e)}},zt=class extends we{constructor(e,i,a,l,f){super(e,i,a,l);b(this,"retokenizeCapturedWithRuleId");this.retokenizeCapturedWithRuleId=f}dispose(){}collectPatterns(e,i){throw new Error("Not supported!")}compile(e,i){throw new Error("Not supported!")}compileAG(e,i,a,l){throw new Error("Not supported!")}},qt=class extends we{constructor(e,i,a,l,f){super(e,i,a,null);b(this,"_match");b(this,"captures");b(this,"_cachedCompiledPatterns");this._match=new ke(l,this.id),this.captures=f,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugMatchRegExp(){return`${this._match.source}`}collectPatterns(e,i){i.push(this._match)}compile(e,i){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,i,a,l){return this._getCachedCompiledPatterns(e).compileAG(e,a,l)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Ne,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Ke=class extends we{constructor(e,i,a,l,f){super(e,i,a,l);b(this,"hasMissingPatterns");b(this,"patterns");b(this,"_cachedCompiledPatterns");this.patterns=f.patterns,this.hasMissingPatterns=f.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}collectPatterns(e,i){for(const a of this.patterns)e.getRule(a).collectPatterns(e,i)}compile(e,i){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,i,a,l){return this._getCachedCompiledPatterns(e).compileAG(e,a,l)}_getCachedCompiledPatterns(e){return this._cachedCompiledPatterns||(this._cachedCompiledPatterns=new Ne,this.collectPatterns(e,this._cachedCompiledPatterns)),this._cachedCompiledPatterns}},Ye=class extends we{constructor(e,i,a,l,f,p,y,d,C,T){super(e,i,a,l);b(this,"_begin");b(this,"beginCaptures");b(this,"_end");b(this,"endHasBackReferences");b(this,"endCaptures");b(this,"applyEndPatternLast");b(this,"hasMissingPatterns");b(this,"patterns");b(this,"_cachedCompiledPatterns");this._begin=new ke(f,this.id),this.beginCaptures=p,this._end=new ke(y||"\uFFFF",-1),this.endHasBackReferences=this._end.hasBackReferences,this.endCaptures=d,this.applyEndPatternLast=C||!1,this.patterns=T.patterns,this.hasMissingPatterns=T.hasMissingPatterns,this._cachedCompiledPatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugEndRegExp(){return`${this._end.source}`}getEndWithResolvedBackReferences(e,i){return this._end.resolveBackReferences(e,i)}collectPatterns(e,i){i.push(this._begin)}compile(e,i){return this._getCachedCompiledPatterns(e,i).compile(e)}compileAG(e,i,a,l){return this._getCachedCompiledPatterns(e,i).compileAG(e,a,l)}_getCachedCompiledPatterns(e,i){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Ne;for(const a of this.patterns)e.getRule(a).collectPatterns(e,this._cachedCompiledPatterns);this.applyEndPatternLast?this._cachedCompiledPatterns.push(this._end.hasBackReferences?this._end.clone():this._end):this._cachedCompiledPatterns.unshift(this._end.hasBackReferences?this._end.clone():this._end)}return this._end.hasBackReferences&&(this.applyEndPatternLast?this._cachedCompiledPatterns.setSource(this._cachedCompiledPatterns.length()-1,i):this._cachedCompiledPatterns.setSource(0,i)),this._cachedCompiledPatterns}},Me=class extends we{constructor(e,i,a,l,f,p,y,d,C){super(e,i,a,l);b(this,"_begin");b(this,"beginCaptures");b(this,"whileCaptures");b(this,"_while");b(this,"whileHasBackReferences");b(this,"hasMissingPatterns");b(this,"patterns");b(this,"_cachedCompiledPatterns");b(this,"_cachedCompiledWhilePatterns");this._begin=new ke(f,this.id),this.beginCaptures=p,this.whileCaptures=d,this._while=new ke(y,bt),this.whileHasBackReferences=this._while.hasBackReferences,this.patterns=C.patterns,this.hasMissingPatterns=C.hasMissingPatterns,this._cachedCompiledPatterns=null,this._cachedCompiledWhilePatterns=null}dispose(){this._cachedCompiledPatterns&&(this._cachedCompiledPatterns.dispose(),this._cachedCompiledPatterns=null),this._cachedCompiledWhilePatterns&&(this._cachedCompiledWhilePatterns.dispose(),this._cachedCompiledWhilePatterns=null)}get debugBeginRegExp(){return`${this._begin.source}`}get debugWhileRegExp(){return`${this._while.source}`}getWhileWithResolvedBackReferences(e,i){return this._while.resolveBackReferences(e,i)}collectPatterns(e,i){i.push(this._begin)}compile(e,i){return this._getCachedCompiledPatterns(e).compile(e)}compileAG(e,i,a,l){return this._getCachedCompiledPatterns(e).compileAG(e,a,l)}_getCachedCompiledPatterns(e){if(!this._cachedCompiledPatterns){this._cachedCompiledPatterns=new Ne;for(const i of this.patterns)e.getRule(i).collectPatterns(e,this._cachedCompiledPatterns)}return this._cachedCompiledPatterns}compileWhile(e,i){return this._getCachedCompiledWhilePatterns(e,i).compile(e)}compileWhileAG(e,i,a,l){return this._getCachedCompiledWhilePatterns(e,i).compileAG(e,a,l)}_getCachedCompiledWhilePatterns(e,i){return this._cachedCompiledWhilePatterns||(this._cachedCompiledWhilePatterns=new Ne,this._cachedCompiledWhilePatterns.push(this._while.hasBackReferences?this._while.clone():this._while)),this._while.hasBackReferences&&this._cachedCompiledWhilePatterns.setSource(0,i||"\uFFFF"),this._cachedCompiledWhilePatterns}},St=class X{static createCaptureRule(e,i,a,l,f){return e.registerRule(p=>new zt(i,p,a,l,f))}static getCompiledRuleId(e,i,a){return e.id||i.registerRule(l=>{if(e.id=l,e.match)return new qt(e.$vscodeTextmateLocation,e.id,e.name,e.match,X._compileCaptures(e.captures,i,a));if(typeof e.begin=="undefined"){e.repository&&(a=ne({},a,e.repository));let f=e.patterns;return typeof f=="undefined"&&e.include&&(f=[{include:e.include}]),new Ke(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,X._compilePatterns(f,i,a))}return e.while?new Me(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,X._compileCaptures(e.beginCaptures||e.captures,i,a),e.while,X._compileCaptures(e.whileCaptures||e.captures,i,a),X._compilePatterns(e.patterns,i,a)):new Ye(e.$vscodeTextmateLocation,e.id,e.name,e.contentName,e.begin,X._compileCaptures(e.beginCaptures||e.captures,i,a),e.end,X._compileCaptures(e.endCaptures||e.captures,i,a),e.applyEndPatternLast,X._compilePatterns(e.patterns,i,a))}),e.id}static _compileCaptures(e,i,a){let l=[];if(e){let f=0;for(const p in e){if(p==="$vscodeTextmateLocation")continue;const y=parseInt(p,10);y>f&&(f=y)}for(let p=0;p<=f;p++)l[p]=null;for(const p in e){if(p==="$vscodeTextmateLocation")continue;const y=parseInt(p,10);let d=0;e[p].patterns&&(d=X.getCompiledRuleId(e[p],i,a)),l[y]=X.createCaptureRule(i,e[p].$vscodeTextmateLocation,e[p].name,e[p].contentName,d)}}return l}static _compilePatterns(e,i,a){let l=[];if(e)for(let f=0,p=e.length;f<p;f++){const y=e[f];let d=-1;if(y.include){const C=gt(y.include);switch(C.kind){case 0:case 1:d=X.getCompiledRuleId(a[y.include],i,a);break;case 2:let T=a[C.ruleName];T&&(d=X.getCompiledRuleId(T,i,a));break;case 3:case 4:const I=C.scopeName,D=C.kind===4?C.ruleName:null,O=i.getExternalGrammar(I,a);if(O)if(D){let P=O.repository[D];P&&(d=X.getCompiledRuleId(P,i,O.repository))}else d=X.getCompiledRuleId(O.repository.$self,i,O.repository);break}}else d=X.getCompiledRuleId(y,i,a);if(d!==-1){const C=i.getRule(d);let T=!1;if((C instanceof Ke||C instanceof Ye||C instanceof Me)&&C.hasMissingPatterns&&C.patterns.length===0&&(T=!0),T)continue;l.push(d)}}return{patterns:l,hasMissingPatterns:(e?e.length:0)!==l.length}}},ke=class Un{constructor(e,i){b(this,"source");b(this,"ruleId");b(this,"hasAnchor");b(this,"hasBackReferences");b(this,"_anchorCache");if(e&&typeof e=="string"){const a=e.length;let l=0,f=[],p=!1;for(let y=0;y<a;y++)if(e.charAt(y)==="\\"&&y+1<a){const C=e.charAt(y+1);C==="z"?(f.push(e.substring(l,y)),f.push("$(?!\\n)(?<!\\n)"),l=y+2):(C==="A"||C==="G")&&(p=!0),y++}this.hasAnchor=p,l===0?this.source=e:(f.push(e.substring(l,a)),this.source=f.join(""))}else this.hasAnchor=!1,this.source=e;this.hasAnchor?this._anchorCache=this._buildAnchorCache():this._anchorCache=null,this.ruleId=i,typeof this.source=="string"?this.hasBackReferences=Wt.test(this.source):this.hasBackReferences=!1}clone(){return new Un(this.source,this.ruleId)}setSource(e){this.source!==e&&(this.source=e,this.hasAnchor&&(this._anchorCache=this._buildAnchorCache()))}resolveBackReferences(e,i){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let a=i.map(l=>e.substring(l.start,l.end));return _t.lastIndex=0,this.source.replace(_t,(l,f)=>ct(a[parseInt(f,10)]||""))}_buildAnchorCache(){if(typeof this.source!="string")throw new Error("This method should only be called if the source is a string");let e=[],i=[],a=[],l=[],f,p,y,d;for(f=0,p=this.source.length;f<p;f++)y=this.source.charAt(f),e[f]=y,i[f]=y,a[f]=y,l[f]=y,y==="\\"&&f+1<p&&(d=this.source.charAt(f+1),d==="A"?(e[f+1]="\uFFFF",i[f+1]="\uFFFF",a[f+1]="A",l[f+1]="A"):d==="G"?(e[f+1]="\uFFFF",i[f+1]="G",a[f+1]="\uFFFF",l[f+1]="G"):(e[f+1]=d,i[f+1]=d,a[f+1]=d,l[f+1]=d),f++);return{A0_G0:e.join(""),A0_G1:i.join(""),A1_G0:a.join(""),A1_G1:l.join("")}}resolveAnchors(e,i){return!this.hasAnchor||!this._anchorCache||typeof this.source!="string"?this.source:e?i?this._anchorCache.A1_G1:this._anchorCache.A1_G0:i?this._anchorCache.A0_G1:this._anchorCache.A0_G0}},Ne=class{constructor(){b(this,"_items");b(this,"_hasAnchors");b(this,"_cached");b(this,"_anchorCache");this._items=[],this._hasAnchors=!1,this._cached=null,this._anchorCache={A0_G0:null,A0_G1:null,A1_G0:null,A1_G1:null}}dispose(){this._disposeCaches()}_disposeCaches(){this._cached&&(this._cached.dispose(),this._cached=null),this._anchorCache.A0_G0&&(this._anchorCache.A0_G0.dispose(),this._anchorCache.A0_G0=null),this._anchorCache.A0_G1&&(this._anchorCache.A0_G1.dispose(),this._anchorCache.A0_G1=null),this._anchorCache.A1_G0&&(this._anchorCache.A1_G0.dispose(),this._anchorCache.A1_G0=null),this._anchorCache.A1_G1&&(this._anchorCache.A1_G1.dispose(),this._anchorCache.A1_G1=null)}push(s){this._items.push(s),this._hasAnchors=this._hasAnchors||s.hasAnchor}unshift(s){this._items.unshift(s),this._hasAnchors=this._hasAnchors||s.hasAnchor}length(){return this._items.length}setSource(s,e){this._items[s].source!==e&&(this._disposeCaches(),this._items[s].setSource(e))}compile(s){if(!this._cached){let e=this._items.map(i=>i.source);this._cached=new Ct(s,e,this._items.map(i=>i.ruleId))}return this._cached}compileAG(s,e,i){return this._hasAnchors?e?i?(this._anchorCache.A1_G1||(this._anchorCache.A1_G1=this._resolveAnchors(s,e,i)),this._anchorCache.A1_G1):(this._anchorCache.A1_G0||(this._anchorCache.A1_G0=this._resolveAnchors(s,e,i)),this._anchorCache.A1_G0):i?(this._anchorCache.A0_G1||(this._anchorCache.A0_G1=this._resolveAnchors(s,e,i)),this._anchorCache.A0_G1):(this._anchorCache.A0_G0||(this._anchorCache.A0_G0=this._resolveAnchors(s,e,i)),this._anchorCache.A0_G0):this.compile(s)}_resolveAnchors(s,e,i){let a=this._items.map(l=>l.resolveAnchors(e,i));return new Ct(s,a,this._items.map(l=>l.ruleId))}},Ct=class{constructor(s,e,i){b(this,"scanner");this.regExps=e,this.rules=i,this.scanner=s.createOnigScanner(e)}dispose(){typeof this.scanner.dispose=="function"&&this.scanner.dispose()}toString(){const s=[];for(let e=0,i=this.rules.length;e<i;e++)s.push("   - "+this.rules[e]+": "+this.regExps[e]);return s.join(`
`)}findNextMatchSync(s,e,i){const a=this.scanner.findNextMatchSync(s,e,i);return a?{ruleId:this.rules[a.index],captureIndices:a.captureIndices}:null}},me=class{constructor(s,e){this.languageId=s,this.tokenType=e}},Vt=(te=class{constructor(e,i){b(this,"_defaultAttributes");b(this,"_embeddedLanguagesMatcher");b(this,"_getBasicScopeAttributes",new lt(e=>{const i=this._scopeToLanguage(e),a=this._toStandardTokenType(e);return new me(i,a)}));this._defaultAttributes=new me(e,8),this._embeddedLanguagesMatcher=new Kt(Object.entries(i||{}))}getDefaultAttributes(){return this._defaultAttributes}getBasicScopeAttributes(e){return e===null?te._NULL_SCOPE_METADATA:this._getBasicScopeAttributes.get(e)}_scopeToLanguage(e){return this._embeddedLanguagesMatcher.match(e)||0}_toStandardTokenType(e){const i=e.match(te.STANDARD_TOKEN_TYPE_REGEXP);if(!i)return 8;switch(i[1]){case"comment":return 1;case"string":return 2;case"regex":return 3;case"meta.embedded":return 0}throw new Error("Unexpected match for standard token type!")}},b(te,"_NULL_SCOPE_METADATA",new me(0,0)),b(te,"STANDARD_TOKEN_TYPE_REGEXP",/\b(comment|string|regex|meta\.embedded)\b/),te),Kt=class{constructor(s){b(this,"values");b(this,"scopesRegExp");if(s.length===0)this.values=null,this.scopesRegExp=null;else{this.values=new Map(s);const e=s.map(([i,a])=>ct(i));e.sort(),e.reverse(),this.scopesRegExp=new RegExp(`^((${e.join(")|(")}))($|\\.)`,"")}}match(s){if(!this.scopesRegExp)return;const e=s.match(this.scopesRegExp);if(e)return this.values.get(e[1])}},gn={InDebugMode:typeof B!="undefined"&&!!{GITHUB_STATE:"/home/runner/work/_temp/_runner_file_commands/save_state_368327ac-5158-473b-9418-1eac444b033e",DOTNET_NOLOGO:"1",USER:"runner",npm_config_user_agent:"npm/10.8.2 node/v20.19.6 linux x64 workspaces/false ci/github-actions",CI:"true",RUNNER_ENVIRONMENT:"github-hosted",GITHUB_ENV:"/home/runner/work/_temp/_runner_file_commands/set_env_368327ac-5158-473b-9418-1eac444b033e",PIPX_HOME:"/opt/pipx",npm_node_execpath:"/opt/hostedtoolcache/node/20.19.6/x64/bin/node",JAVA_HOME_8_X64:"/usr/lib/jvm/temurin-8-jdk-amd64",SHLVL:"1",npm_config_noproxy:"",HOME:"/home/runner",RUNNER_TEMP:"/home/runner/work/_temp",GITHUB_EVENT_PATH:"/home/runner/work/_temp/_github_workflow/event.json",npm_package_json:"/home/runner/work/yunti-ui/yunti-ui/package.json",JAVA_HOME_11_X64:"/usr/lib/jvm/temurin-11-jdk-amd64",PIPX_BIN_DIR:"/opt/pipx_bin",GITHUB_REPOSITORY_OWNER:"yuntijs",npm_package_engines_node:">=20.0.0",GRADLE_HOME:"/usr/share/gradle-9.2.1",ANDROID_NDK_LATEST_HOME:"/usr/local/lib/android/sdk/ndk/29.0.14206865",JAVA_HOME_21_X64:"/usr/lib/jvm/temurin-21-jdk-amd64",GITHUB_RETENTION_DAYS:"90",GITHUB_REPOSITORY_OWNER_ID:"148947838",POWERSHELL_DISTRIBUTION_CHANNEL:"GitHub-Actions-ubuntu24",AZURE_EXTENSION_DIR:"/opt/az/azcliextensions",GITHUB_HEAD_REF:"",npm_config_userconfig:"/home/runner/.npmrc",npm_config_local_prefix:"/home/runner/work/yunti-ui/yunti-ui",SYSTEMD_EXEC_PID:"1915",GITHUB_GRAPHQL_URL:"https://api.github.com/graphql",COLOR:"0",JAVA_HOME_25_X64:"/usr/lib/jvm/temurin-25-jdk-amd64",NVM_DIR:"/home/runner/.nvm",DOTNET_SKIP_FIRST_TIME_EXPERIENCE:"1",JAVA_HOME_17_X64:"/usr/lib/jvm/temurin-17-jdk-amd64",ImageVersion:"20251215.174.1",LOGNAME:"runner",RUNNER_OS:"Linux",GITHUB_API_URL:"https://api.github.com",GOROOT_1_22_X64:"/opt/hostedtoolcache/go/1.22.12/x64",SWIFT_PATH:"/usr/share/swift/usr/bin",CHROMEWEBDRIVER:"/usr/local/share/chromedriver-linux64",GOROOT_1_23_X64:"/opt/hostedtoolcache/go/1.23.12/x64",JOURNAL_STREAM:"9:13683",GITHUB_WORKFLOW:"Deploy to GitHub Pages",_:"/opt/hostedtoolcache/node/20.19.6/x64/bin/npm",npm_config_prefix:"/opt/hostedtoolcache/node/20.19.6/x64",npm_config_npm_version:"10.8.2",MEMORY_PRESSURE_WATCH:"/sys/fs/cgroup/system.slice/hosted-compute-agent.service/memory.pressure",GOROOT_1_24_X64:"/opt/hostedtoolcache/go/1.24.11/x64",ACTIONS_RUNNER_ACTION_ARCHIVE_CACHE:"/opt/actionarchivecache",GOROOT_1_25_X64:"/opt/hostedtoolcache/go/1.25.5/x64",GITHUB_RUN_ID:"20689342913",npm_config_cache:"/home/runner/.npm",GITHUB_REF_TYPE:"branch",BOOTSTRAP_HASKELL_NONINTERACTIVE:"1",GITHUB_WORKFLOW_SHA:"7e61f982af3cf65d4484ba6b9777783e24400f50",GITHUB_BASE_REF:"",ImageOS:"ubuntu24",GITHUB_WORKFLOW_REF:"yuntijs/yunti-ui/.github/workflows/deploy-ghpages.yml@refs/heads/main",GITHUB_ACTION_REPOSITORY:"",ENABLE_RUNNER_TRACING:"true",npm_config_node_gyp:"/opt/hostedtoolcache/node/20.19.6/x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js",PATH:"/home/runner/work/yunti-ui/yunti-ui/node_modules/.bin:/home/runner/work/yunti-ui/node_modules/.bin:/home/runner/work/node_modules/.bin:/home/runner/node_modules/.bin:/home/node_modules/.bin:/node_modules/.bin:/opt/hostedtoolcache/node/20.19.6/x64/lib/node_modules/npm/node_modules/@npmcli/run-script/lib/node-gyp-bin:/home/runner/setup-pnpm/node_modules/.bin:/opt/hostedtoolcache/node/20.19.6/x64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin",ANT_HOME:"/usr/share/ant",DOTNET_MULTILEVEL_LOOKUP:"0",RUNNER_TRACKING_ID:"github_3d0b1d59-286e-4027-b93b-9a7ef466bf48",INVOCATION_ID:"235c6336c288490e9d41dd219c07b68f",RUNNER_TOOL_CACHE:"/opt/hostedtoolcache",NODE:"/opt/hostedtoolcache/node/20.19.6/x64/bin/node",npm_package_name:"@yuntijs/ui",GITHUB_ACTION:"__run_2",GITHUB_RUN_NUMBER:"215",GITHUB_TRIGGERING_ACTOR:"Carrotzpc",RUNNER_ARCH:"X64",XDG_RUNTIME_DIR:"/run/user/1001",AGENT_TOOLSDIRECTORY:"/opt/hostedtoolcache",LANG:"C.UTF-8",VCPKG_INSTALLATION_ROOT:"/usr/local/share/vcpkg",CONDA:"/usr/share/miniconda",RUNNER_NAME:"GitHub Actions 1000001347",XDG_CONFIG_HOME:"/home/runner/.config",GITHUB_REF_NAME:"main",GITHUB_REPOSITORY:"yuntijs/yunti-ui",npm_lifecycle_script:"dumi build",ANDROID_NDK_ROOT:"/usr/local/lib/android/sdk/ndk/27.3.13750724",GITHUB_ACTION_REF:"",DEBIAN_FRONTEND:"noninteractive",npm_config_public_hoist_pattern:`*@umijs/lint*

*changelog*

*commitlint*

*eslint*

*postcss*

*prettier*

*remark*

*semantic-release*

*stylelint*`,SHELL:"/bin/bash",GITHUB_REPOSITORY_ID:"733395713",GITHUB_ACTIONS:"true",npm_package_version:"2.0.0-beta.23",npm_lifecycle_event:"docs:build",NODE_PATH:"/home/runner/work/yunti-ui/yunti-ui/node_modules/.pnpm/dumi@2.4.21_@babel+core@7.27.1_@swc+helpers@0.5.15_@types+node@22.15.19_@types+react@19_cc55918ff0fe1ec6c547a62206f13423/node_modules/dumi/bin/node_modules:/home/runner/work/yunti-ui/yunti-ui/node_modules/.pnpm/dumi@2.4.21_@babel+core@7.27.1_@swc+helpers@0.5.15_@types+node@22.15.19_@types+react@19_cc55918ff0fe1ec6c547a62206f13423/node_modules/dumi/node_modules:/home/runner/work/yunti-ui/yunti-ui/node_modules/.pnpm/dumi@2.4.21_@babel+core@7.27.1_@swc+helpers@0.5.15_@types+node@22.15.19_@types+react@19_cc55918ff0fe1ec6c547a62206f13423/node_modules:/home/runner/work/yunti-ui/yunti-ui/node_modules/.pnpm/node_modules",GITHUB_REF_PROTECTED:"false",npm_config_strict_peer_dependencies:"",GITHUB_WORKSPACE:"/home/runner/work/yunti-ui/yunti-ui",ACCEPT_EULA:"Y",GITHUB_JOB:"deploy",npm_package_engines_pnpm:">=10.0.0",GITHUB_SHA:"7e61f982af3cf65d4484ba6b9777783e24400f50",GITHUB_RUN_ATTEMPT:"1",GITHUB_REF:"refs/heads/main",GITHUB_ACTOR:"Carrotzpc",ANDROID_SDK_ROOT:"/usr/local/lib/android/sdk",npm_config_globalconfig:"/opt/hostedtoolcache/node/20.19.6/x64/etc/npmrc",npm_config_init_module:"/home/runner/.npm-init.js",GITHUB_PATH:"/home/runner/work/_temp/_runner_file_commands/add_path_368327ac-5158-473b-9418-1eac444b033e",JAVA_HOME:"/usr/lib/jvm/temurin-17-jdk-amd64",PWD:"/home/runner/work/yunti-ui/yunti-ui",GITHUB_ACTOR_ID:"10265417",RUNNER_WORKSPACE:"/home/runner/work/yunti-ui",npm_execpath:"/opt/hostedtoolcache/node/20.19.6/x64/lib/node_modules/npm/bin/npm-cli.js",HOMEBREW_CLEANUP_PERIODIC_FULL_DAYS:"3650",GITHUB_EVENT_NAME:"workflow_run",HOMEBREW_NO_AUTO_UPDATE:"1",ANDROID_HOME:"/usr/local/lib/android/sdk",GITHUB_SERVER_URL:"https://github.com",GECKOWEBDRIVER:"/usr/local/share/gecko_driver",GHCUP_INSTALL_BASE_PREFIX:"/usr/local",GITHUB_OUTPUT:"/home/runner/work/_temp/_runner_file_commands/set_output_368327ac-5158-473b-9418-1eac444b033e",npm_config_global_prefix:"/opt/hostedtoolcache/node/20.19.6/x64",EDGEWEBDRIVER:"/usr/local/share/edge_driver",npm_command:"run-script",ANDROID_NDK:"/usr/local/lib/android/sdk/ndk/27.3.13750724",SGX_AESM_ADDR:"1",CHROME_BIN:"/usr/bin/google-chrome",SELENIUM_JAR_PATH:"/usr/share/java/selenium-server.jar",MEMORY_PRESSURE_WRITE:"c29tZSAyMDAwMDAgMjAwMDAwMAA=",PNPM_HOME:"/home/runner/setup-pnpm/node_modules/.bin",ANDROID_NDK_HOME:"/usr/local/lib/android/sdk/ndk/27.3.13750724",GITHUB_STEP_SUMMARY:"/home/runner/work/_temp/_runner_file_commands/step_summary_368327ac-5158-473b-9418-1eac444b033e",INIT_CWD:"/home/runner/work/yunti-ui/yunti-ui",EDITOR:"vi",NODE_ENV:"production",DUMI_PRESETS:"/home/runner/work/yunti-ui/yunti-ui/node_modules/.pnpm/dumi@2.4.21_@babel+core@7.27.1_@swc+helpers@0.5.15_@types+node@22.15.19_@types+react@19_cc55918ff0fe1ec6c547a62206f13423/node_modules/dumi/dist/preset.js",DID_YOU_KNOW:"none",UMI_DIR:"/home/runner/work/yunti-ui/yunti-ui/node_modules/.pnpm/umi@4.4.11_@babel+core@7.27.1_@types+node@22.15.19_@types+react@19.1.13_@types+webpack@_b01cc8b131839f0e043f57c0b6740913/node_modules/umi"}.VSCODE_TEXTMATE_DEBUG},Rt=!1,Xe=class{constructor(s,e){this.stack=s,this.stoppedEarly=e}};function wt(s,e,i,a,l,f,p,y){const d=e.content.length;let C=!1,T=-1;if(p){const O=Yt(s,e,i,a,l,f);l=O.stack,a=O.linePos,i=O.isFirstLine,T=O.anchorPosition}const I=Date.now();for(;!C;){if(y!==0&&Date.now()-I>y)return new Xe(l,!0);D()}return new Xe(l,!1);function D(){const O=Xt(s,e,i,a,l,T);if(!O){f.produce(l,d),C=!0;return}const P=O.captureIndices,J=O.matchedRuleId,K=P&&P.length>0?P[0].end>a:!1;if(J===yt){const q=l.getRule(s);f.produce(l,P[0].start),l=l.withContentNameScopesList(l.nameScopesList),Te(s,e,i,l,f,q.endCaptures,P),f.produce(l,P[0].end);const Y=l;if(l=l.parent,T=Y.getAnchorPos(),!K&&Y.getEnterPos()===a){l=Y,f.produce(l,d),C=!0;return}}else{const q=s.getRule(J);f.produce(l,P[0].start);const Y=l,_e=q.getName(e.content,P),oe=l.contentNameScopesList.pushAttributed(_e,s);if(l=l.push(J,a,T,P[0].end===d,null,oe,oe),q instanceof Ye){const re=q;Te(s,e,i,l,f,re.beginCaptures,P),f.produce(l,P[0].end),T=P[0].end;const et=re.getContentName(e.content,P),tt=oe.pushAttributed(et,s);if(l=l.withContentNameScopesList(tt),re.endHasBackReferences&&(l=l.withEndRule(re.getEndWithResolvedBackReferences(e.content,P))),!K&&Y.hasSameRuleAs(l)){l=l.pop(),f.produce(l,d),C=!0;return}}else if(q instanceof Me){const re=q;Te(s,e,i,l,f,re.beginCaptures,P),f.produce(l,P[0].end),T=P[0].end;const et=re.getContentName(e.content,P),tt=oe.pushAttributed(et,s);if(l=l.withContentNameScopesList(tt),re.whileHasBackReferences&&(l=l.withEndRule(re.getWhileWithResolvedBackReferences(e.content,P))),!K&&Y.hasSameRuleAs(l)){l=l.pop(),f.produce(l,d),C=!0;return}}else if(Te(s,e,i,l,f,q.captures,P),f.produce(l,P[0].end),l=l.pop(),!K){l=l.safePop(),f.produce(l,d),C=!0;return}}P[0].end>a&&(a=P[0].end,i=!1)}}function Yt(s,e,i,a,l,f){let p=l.beginRuleCapturedEOL?0:-1;const y=[];for(let d=l;d;d=d.pop()){const C=d.getRule(s);C instanceof Me&&y.push({rule:C,stack:d})}for(let d=y.pop();d;d=y.pop()){const{ruleScanner:C,findOptions:T}=Zt(d.rule,s,d.stack.endRule,i,a===p),I=C.findNextMatchSync(e,a,T);if(I){if(I.ruleId!==bt){l=d.stack.pop();break}I.captureIndices&&I.captureIndices.length&&(f.produce(d.stack,I.captureIndices[0].start),Te(s,e,i,d.stack,f,d.rule.whileCaptures,I.captureIndices),f.produce(d.stack,I.captureIndices[0].end),p=I.captureIndices[0].end,I.captureIndices[0].end>a&&(a=I.captureIndices[0].end,i=!1))}else{l=d.stack.pop();break}}return{stack:l,linePos:a,anchorPosition:p,isFirstLine:i}}function Xt(s,e,i,a,l,f){const p=Jt(s,e,i,a,l,f),y=s.getInjections();if(y.length===0)return p;const d=Qt(y,s,e,i,a,l,f);if(!d)return p;if(!p)return d;const C=p.captureIndices[0].start,T=d.captureIndices[0].start;return T<C||d.priorityMatch&&T===C?d:p}function Jt(s,e,i,a,l,f){const p=l.getRule(s),{ruleScanner:y,findOptions:d}=kt(p,s,l.endRule,i,a===f),C=y.findNextMatchSync(e,a,d);return C?{captureIndices:C.captureIndices,matchedRuleId:C.ruleId}:null}function Qt(s,e,i,a,l,f,p){let y=Number.MAX_VALUE,d=null,C,T=0;const I=f.contentNameScopesList.getScopeNames();for(let D=0,O=s.length;D<O;D++){const P=s[D];if(!P.matcher(I))continue;const J=e.getRule(P.ruleId),{ruleScanner:K,findOptions:q}=kt(J,e,null,a,l===p),Y=K.findNextMatchSync(i,l,q);if(!Y)continue;const _e=Y.captureIndices[0].start;if(!(_e>=y)&&(y=_e,d=Y.captureIndices,C=Y.ruleId,T=P.priority,y===l))break}return d?{priorityMatch:T===-1,captureIndices:d,matchedRuleId:C}:null}function kt(s,e,i,a,l){if(Rt){const p=s.compile(e,i),y=Nt(a,l);return{ruleScanner:p,findOptions:y}}return{ruleScanner:s.compileAG(e,i,a,l),findOptions:0}}function Zt(s,e,i,a,l){if(Rt){const p=s.compileWhile(e,i),y=Nt(a,l);return{ruleScanner:p,findOptions:y}}return{ruleScanner:s.compileWhileAG(e,i,a,l),findOptions:0}}function Nt(s,e){let i=0;return s||(i|=1),e||(i|=4),i}function Te(s,e,i,a,l,f,p){if(f.length===0)return;const y=e.content,d=Math.min(f.length,p.length),C=[],T=p[0].end;for(let I=0;I<d;I++){const D=f[I];if(D===null)continue;const O=p[I];if(O.length===0)continue;if(O.start>T)break;for(;C.length>0&&C[C.length-1].endPos<=O.start;)l.produceFromScopes(C[C.length-1].scopes,C[C.length-1].endPos),C.pop();if(C.length>0?l.produceFromScopes(C[C.length-1].scopes,O.start):l.produce(a,O.start),D.retokenizeCapturedWithRuleId){const J=D.getName(y,p),K=a.contentNameScopesList.pushAttributed(J,s),q=D.getContentName(y,p),Y=K.pushAttributed(q,s),_e=a.push(D.retokenizeCapturedWithRuleId,O.start,-1,!1,null,K,Y),oe=s.createOnigString(y.substring(0,O.end));wt(s,oe,i&&O.start===0,O.start,_e,l,!1,0),dt(oe);continue}const P=D.getName(y,p);if(P!==null){const K=(C.length>0?C[C.length-1].scopes:a.contentNameScopesList).pushAttributed(P,s);C.push(new en(K,O.end))}}for(;C.length>0;)l.produceFromScopes(C[C.length-1].scopes,C[C.length-1].endPos),C.pop()}var en=class{constructor(s,e){b(this,"scopes");b(this,"endPos");this.scopes=s,this.endPos=e}};function tn(s,e,i,a,l,f,p,y){return new Je(s,e,i,a,l,f,p,y)}function pe(s,e,i,a,l){const f=Ge(e,Q),p=St.getCompiledRuleId(i,a,l.repository);for(const y of f)s.push({debugSelector:e,matcher:y.matcher,ruleId:p,grammar:l,priority:y.priority})}function Q(s,e){if(e.length<s.length)return!1;let i=0;return s.every(a=>{for(let l=i;l<e.length;l++)if(Tt(e[l],a))return i=l+1,!0;return!1})}function Tt(s,e){if(!s)return!1;if(s===e)return!0;const i=e.length;return s.length>i&&s.substr(0,i)===e&&s[i]==="."}var Je=class{constructor(s,e,i,a,l,f,p,y){b(this,"_rootId");b(this,"_lastRuleId");b(this,"_ruleId2desc");b(this,"_includedGrammars");b(this,"_grammarRepository");b(this,"_grammar");b(this,"_injections");b(this,"_basicScopeAttributesProvider");b(this,"_tokenTypeMatchers");if(this._rootScopeName=s,this.balancedBracketSelectors=f,this._onigLib=y,this._basicScopeAttributesProvider=new Vt(i,a),this._rootId=-1,this._lastRuleId=0,this._ruleId2desc=[null],this._includedGrammars={},this._grammarRepository=p,this._grammar=Ee(e,null),this._injections=null,this._tokenTypeMatchers=[],l)for(const d of Object.keys(l)){const C=Ge(d,Q);for(const T of C)this._tokenTypeMatchers.push({matcher:T.matcher,type:l[d]})}}get themeProvider(){return this._grammarRepository}dispose(){for(const s of this._ruleId2desc)s&&s.dispose()}createOnigScanner(s){return this._onigLib.createOnigScanner(s)}createOnigString(s){return this._onigLib.createOnigString(s)}getMetadataForScope(s){return this._basicScopeAttributesProvider.getBasicScopeAttributes(s)}_collectInjections(){const s={lookup:l=>l===this._rootScopeName?this._grammar:this.getExternalGrammar(l),injections:l=>this._grammarRepository.injections(l)},e=[],i=this._rootScopeName,a=s.lookup(i);if(a){const l=a.injections;if(l)for(let p in l)pe(e,p,l[p],this,a);const f=this._grammarRepository.injections(i);f&&f.forEach(p=>{const y=this.getExternalGrammar(p);if(y){const d=y.injectionSelector;d&&pe(e,d,y,this,y)}})}return e.sort((l,f)=>l.priority-f.priority),e}getInjections(){return this._injections===null&&(this._injections=this._collectInjections()),this._injections}registerRule(s){const e=++this._lastRuleId,i=s(e);return this._ruleId2desc[e]=i,i}getRule(s){return this._ruleId2desc[s]}getExternalGrammar(s,e){if(this._includedGrammars[s])return this._includedGrammars[s];if(this._grammarRepository){const i=this._grammarRepository.lookup(s);if(i)return this._includedGrammars[s]=Ee(i,e&&e.$base),this._includedGrammars[s]}}tokenizeLine(s,e,i=0){const a=this._tokenize(s,e,!1,i);return{tokens:a.lineTokens.getResult(a.ruleStack,a.lineLength),ruleStack:a.ruleStack,stoppedEarly:a.stoppedEarly}}tokenizeLine2(s,e,i=0){const a=this._tokenize(s,e,!0,i);return{tokens:a.lineTokens.getBinaryResult(a.ruleStack,a.lineLength),ruleStack:a.ruleStack,stoppedEarly:a.stoppedEarly}}_tokenize(s,e,i,a){this._rootId===-1&&(this._rootId=St.getCompiledRuleId(this._grammar.repository.$self,this,this._grammar.repository),this.getInjections());let l;if(!e||e===ge.NULL){l=!0;const C=this._basicScopeAttributesProvider.getDefaultAttributes(),T=this.themeProvider.getDefaults(),I=Le.set(0,C.languageId,C.tokenType,null,T.fontStyle,T.foregroundId,T.backgroundId),D=this.getRule(this._rootId).getName(null,null);let O;D?O=le.createRootAndLookUpScopeName(D,I,this):O=le.createRoot("unknown",I),e=new ge(null,this._rootId,-1,-1,!1,null,O,O)}else l=!1,e.reset();s=s+`
`;const f=this.createOnigString(s),p=f.content.length,y=new Ze(i,s,this._tokenTypeMatchers,this.balancedBracketSelectors),d=wt(this,f,l,0,e,y,!0,a);return dt(f),{lineLength:p,lineTokens:y,ruleStack:d.stack,stoppedEarly:d.stoppedEarly}}};function Ee(s,e){return s=j(s),s.repository=s.repository||{},s.repository.$self={$vscodeTextmateLocation:s.$vscodeTextmateLocation,patterns:s.patterns,name:s.scopeName},s.repository.$base=e||s.repository.$self,s}var le=class ce{constructor(e,i,a){this.parent=e,this.scopePath=i,this.tokenAttributes=a}static fromExtension(e,i){var f;let a=e,l=(f=e==null?void 0:e.scopePath)!=null?f:null;for(const p of i)l=Ue.push(l,p.scopeNames),a=new ce(a,l,p.encodedTokenAttributes);return a}static createRoot(e,i){return new ce(null,new Ue(null,e),i)}static createRootAndLookUpScopeName(e,i,a){const l=a.getMetadataForScope(e),f=new Ue(null,e),p=a.themeProvider.themeMatch(f),y=ce.mergeAttributes(i,l,p);return new ce(null,f,y)}get scopeName(){return this.scopePath.scopeName}toString(){return this.getScopeNames().join(" ")}equals(e){return ce.equals(this,e)}static equals(e,i){do{if(e===i||!e&&!i)return!0;if(!e||!i||e.scopeName!==i.scopeName||e.tokenAttributes!==i.tokenAttributes)return!1;e=e.parent,i=i.parent}while(!0)}static mergeAttributes(e,i,a){let l=-1,f=0,p=0;return a!==null&&(l=a.fontStyle,f=a.foregroundId,p=a.backgroundId),Le.set(e,i.languageId,i.tokenType,null,l,f,p)}pushAttributed(e,i){if(e===null)return this;if(e.indexOf(" ")===-1)return ce._pushAttributed(this,e,i);const a=e.split(/ /g);let l=this;for(const f of a)l=ce._pushAttributed(l,f,i);return l}static _pushAttributed(e,i,a){const l=a.getMetadataForScope(i),f=e.scopePath.push(i),p=a.themeProvider.themeMatch(f),y=ce.mergeAttributes(e.tokenAttributes,l,p);return new ce(e,f,y)}getScopeNames(){return this.scopePath.getSegments()}getExtensionIfDefined(e){var l,f;const i=[];let a=this;for(;a&&a!==e;)i.push({encodedTokenAttributes:a.tokenAttributes,scopeNames:a.scopePath.getExtensionIfDefined((f=(l=a.parent)==null?void 0:l.scopePath)!=null?f:null)}),a=a.parent;return a===e?i.reverse():void 0}},ge=(Z=class{constructor(e,i,a,l,f,p,y,d){b(this,"_stackElementBrand");b(this,"_enterPos");b(this,"_anchorPos");b(this,"depth");this.parent=e,this.ruleId=i,this.beginRuleCapturedEOL=f,this.endRule=p,this.nameScopesList=y,this.contentNameScopesList=d,this.depth=this.parent?this.parent.depth+1:1,this._enterPos=a,this._anchorPos=l}equals(e){return e===null?!1:Z._equals(this,e)}static _equals(e,i){return e===i?!0:this._structuralEquals(e,i)?le.equals(e.contentNameScopesList,i.contentNameScopesList):!1}static _structuralEquals(e,i){do{if(e===i||!e&&!i)return!0;if(!e||!i||e.depth!==i.depth||e.ruleId!==i.ruleId||e.endRule!==i.endRule)return!1;e=e.parent,i=i.parent}while(!0)}clone(){return this}static _reset(e){for(;e;)e._enterPos=-1,e._anchorPos=-1,e=e.parent}reset(){Z._reset(this)}pop(){return this.parent}safePop(){return this.parent?this.parent:this}push(e,i,a,l,f,p,y){return new Z(this,e,i,a,l,f,p,y)}getEnterPos(){return this._enterPos}getAnchorPos(){return this._anchorPos}getRule(e){return e.getRule(this.ruleId)}toString(){const e=[];return this._writeString(e,0),"["+e.join(",")+"]"}_writeString(e,i){var a,l;return this.parent&&(i=this.parent._writeString(e,i)),e[i++]=`(${this.ruleId}, ${(a=this.nameScopesList)==null?void 0:a.toString()}, ${(l=this.contentNameScopesList)==null?void 0:l.toString()})`,i}withContentNameScopesList(e){return this.contentNameScopesList===e?this:this.parent.push(this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,this.endRule,this.nameScopesList,e)}withEndRule(e){return this.endRule===e?this:new Z(this.parent,this.ruleId,this._enterPos,this._anchorPos,this.beginRuleCapturedEOL,e,this.nameScopesList,this.contentNameScopesList)}hasSameRuleAs(e){let i=this;for(;i&&i._enterPos===e._enterPos;){if(i.ruleId===e.ruleId)return!0;i=i.parent}return!1}toStateStackFrame(){var e,i,a,l,f,p;return{ruleId:this.ruleId,beginRuleCapturedEOL:this.beginRuleCapturedEOL,endRule:this.endRule,nameScopesList:(l=(a=this.nameScopesList)==null?void 0:a.getExtensionIfDefined((i=(e=this.parent)==null?void 0:e.nameScopesList)!=null?i:null))!=null?l:[],contentNameScopesList:(p=(f=this.contentNameScopesList)==null?void 0:f.getExtensionIfDefined(this.nameScopesList))!=null?p:[]}}static pushFrame(e,i){var l,f,p;const a=le.fromExtension((l=e==null?void 0:e.nameScopesList)!=null?l:null,i.nameScopesList);return new Z(e,i.ruleId,(f=i.enterPos)!=null?f:-1,(p=i.anchorPos)!=null?p:-1,i.beginRuleCapturedEOL,i.endRule,a,le.fromExtension(a,i.contentNameScopesList))}},b(Z,"NULL",new Z(null,0,0,0,!1,null,null,null)),Z),Qe=class{constructor(s,e){b(this,"balancedBracketScopes");b(this,"unbalancedBracketScopes");b(this,"allowAny",!1);this.balancedBracketScopes=s.flatMap(i=>i==="*"?(this.allowAny=!0,[]):Ge(i,Q).map(a=>a.matcher)),this.unbalancedBracketScopes=e.flatMap(i=>Ge(i,Q).map(a=>a.matcher))}get matchesAlways(){return this.allowAny&&this.unbalancedBracketScopes.length===0}get matchesNever(){return this.balancedBracketScopes.length===0&&!this.allowAny}match(s){for(const e of this.unbalancedBracketScopes)if(e(s))return!1;for(const e of this.balancedBracketScopes)if(e(s))return!0;return this.allowAny}},Ze=class{constructor(s,e,i,a){b(this,"_emitBinaryTokens");b(this,"_lineText");b(this,"_tokens");b(this,"_binaryTokens");b(this,"_lastTokenEndIndex");b(this,"_tokenTypeOverrides");this.balancedBracketSelectors=a,this._emitBinaryTokens=s,this._tokenTypeOverrides=i,this._lineText=null,this._tokens=[],this._binaryTokens=[],this._lastTokenEndIndex=0}produce(s,e){this.produceFromScopes(s.contentNameScopesList,e)}produceFromScopes(s,e){var a,l,f,p;if(this._lastTokenEndIndex>=e)return;if(this._emitBinaryTokens){let y=(a=s==null?void 0:s.tokenAttributes)!=null?a:0,d=!1;if((l=this.balancedBracketSelectors)!=null&&l.matchesAlways&&(d=!0),this._tokenTypeOverrides.length>0||this.balancedBracketSelectors&&!this.balancedBracketSelectors.matchesAlways&&!this.balancedBracketSelectors.matchesNever){const C=(f=s==null?void 0:s.getScopeNames())!=null?f:[];for(const T of this._tokenTypeOverrides)T.matcher(C)&&(y=Le.set(y,0,T.type,null,-1,0,0));this.balancedBracketSelectors&&(d=this.balancedBracketSelectors.match(C))}if(d&&(y=Le.set(y,0,8,d,-1,0,0)),this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-1]===y){this._lastTokenEndIndex=e;return}this._binaryTokens.push(this._lastTokenEndIndex),this._binaryTokens.push(y),this._lastTokenEndIndex=e;return}const i=(p=s==null?void 0:s.getScopeNames())!=null?p:[];this._tokens.push({startIndex:this._lastTokenEndIndex,endIndex:e,scopes:i}),this._lastTokenEndIndex=e}getResult(s,e){return this._tokens.length>0&&this._tokens[this._tokens.length-1].startIndex===e-1&&this._tokens.pop(),this._tokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(s,e),this._tokens[this._tokens.length-1].startIndex=0),this._tokens}getBinaryResult(s,e){this._binaryTokens.length>0&&this._binaryTokens[this._binaryTokens.length-2]===e-1&&(this._binaryTokens.pop(),this._binaryTokens.pop()),this._binaryTokens.length===0&&(this._lastTokenEndIndex=-1,this.produce(s,e),this._binaryTokens[this._binaryTokens.length-2]=0);const i=new Uint32Array(this._binaryTokens.length);for(let a=0,l=this._binaryTokens.length;a<l;a++)i[a]=this._binaryTokens[a];return i}},Ie=class{constructor(s,e){b(this,"_grammars",new Map);b(this,"_rawGrammars",new Map);b(this,"_injectionGrammars",new Map);b(this,"_theme");this._onigLib=e,this._theme=s}dispose(){for(const s of this._grammars.values())s.dispose()}setTheme(s){this._theme=s}getColorMap(){return this._theme.getColorMap()}addGrammar(s,e){this._rawGrammars.set(s.scopeName,s),e&&this._injectionGrammars.set(s.scopeName,e)}lookup(s){return this._rawGrammars.get(s)}injections(s){return this._injectionGrammars.get(s)}getDefaults(){return this._theme.getDefaults()}themeMatch(s){return this._theme.match(s)}grammarForScopeName(s,e,i,a,l){if(!this._grammars.has(s)){let f=this._rawGrammars.get(s);if(!f)return null;this._grammars.set(s,tn(s,f,e,i,a,l,this,this._onigLib))}return this._grammars.get(s)}},Et=class{constructor(s){b(this,"_options");b(this,"_syncRegistry");b(this,"_ensureGrammarCache");this._options=s,this._syncRegistry=new Ie(ve.createFromRawTheme(s.theme,s.colorMap),s.onigLib),this._ensureGrammarCache=new Map}dispose(){this._syncRegistry.dispose()}setTheme(s,e){this._syncRegistry.setTheme(ve.createFromRawTheme(s,e))}getColorMap(){return this._syncRegistry.getColorMap()}loadGrammarWithEmbeddedLanguages(s,e,i){return this.loadGrammarWithConfiguration(s,e,{embeddedLanguages:i})}loadGrammarWithConfiguration(s,e,i){return this._loadGrammar(s,e,i.embeddedLanguages,i.tokenTypes,new Qe(i.balancedBracketSelectors||[],i.unbalancedBracketSelectors||[]))}loadGrammar(s){return this._loadGrammar(s,0,null,null,null)}_loadGrammar(s,e,i,a,l){const f=new z(this._syncRegistry,s);for(;f.Q.length>0;)f.Q.map(p=>this._loadSingleGrammar(p.scopeName)),f.processQueue();return this._grammarForScopeName(s,e,i,a,l)}_loadSingleGrammar(s){this._ensureGrammarCache.has(s)||(this._doLoadSingleGrammar(s),this._ensureGrammarCache.set(s,!0))}_doLoadSingleGrammar(s){const e=this._options.loadGrammar(s);if(e){const i=typeof this._options.getInjections=="function"?this._options.getInjections(s):void 0;this._syncRegistry.addGrammar(e,i)}}addGrammar(s,e=[],i=0,a=null){return this._syncRegistry.addGrammar(s,e),this._grammarForScopeName(s.scopeName,i,a)}_grammarForScopeName(s,e=0,i=null,a=null,l=null){return this._syncRegistry.grammarForScopeName(s,e,i,a,l)}},nn=ge.NULL}}]);
}());